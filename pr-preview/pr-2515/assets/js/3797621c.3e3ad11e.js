"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[2320],{388077:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>k,frontMatter:()=>p,metadata:()=>m,toc:()=>d});n(667294);var r=n(603905),a=n(451715),o=n(907626);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const p={id:"upgrade-centreon-ha-from-20-10",title:"Upgrade Centreon HA from Centreon 20.10"},i=void 0,m={unversionedId:"upgrade/centreon-ha/upgrade-centreon-ha-from-20-10",id:"version-21.10/upgrade/centreon-ha/upgrade-centreon-ha-from-20-10",title:"Upgrade Centreon HA from Centreon 20.10",description:"This chapter describes how to upgrade your Centreon HA platform from version 20.10",source:"@site/versioned_docs/version-21.10/upgrade/centreon-ha/upgrade-from-20-10.md",sourceDirName:"upgrade/centreon-ha",slug:"/upgrade/centreon-ha/upgrade-centreon-ha-from-20-10",permalink:"/centreon-documentation/pr-preview/pr-2515/docs/21.10/upgrade/centreon-ha/upgrade-centreon-ha-from-20-10",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/versioned_docs/version-21.10/upgrade/centreon-ha/upgrade-from-20-10.md",tags:[],version:"21.10",lastUpdatedAt:1692974023,formattedLastUpdatedAt:"Aug 25, 2023",frontMatter:{id:"upgrade-centreon-ha-from-20-10",title:"Upgrade Centreon HA from Centreon 20.10"},sidebar:"version-21.10/docs",previous:{title:"Upgrade Centreon HA from Centreon 20.04",permalink:"/centreon-documentation/pr-preview/pr-2515/docs/21.10/upgrade/centreon-ha/upgrade-centreon-ha-from-20-04"},next:{title:"Upgrade Centreon HA from Centreon 21.04",permalink:"/centreon-documentation/pr-preview/pr-2515/docs/21.10/upgrade/centreon-ha/upgrade-centreon-ha-from-21-04"}},u={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Suspend cluster resources management",id:"suspend-cluster-resources-management",level:3},{value:"Perform a backup",id:"perform-a-backup",level:3},{value:"Update the RPM signing key",id:"update-the-rpm-signing-key",level:3},{value:"Upgrade process",id:"upgrade-process",level:2},{value:"Update the Centreon repository",id:"update-the-centreon-repository",level:3},{value:"Upgrade PHP",id:"upgrade-php",level:3},{value:"Upgrade the Centreon solution",id:"upgrade-the-centreon-solution",level:3},{value:"Removing cron jobs",id:"removing-cron-jobs",level:3},{value:"Reset the permissions for centreon_central_sync resource",id:"reset-the-permissions-for-centreon_central_sync-resource",level:3},{value:"Clean broker memory files",id:"clean-broker-memory-files",level:3},{value:"Restart Centreon process",id:"restart-centreon-process",level:3},{value:"Upgrade of MariaDB Databases",id:"upgrade-of-mariadb-databases",level:3},{value:"Configure MariaDB slave_parallel_mode",id:"configure-mariadb-slave_parallel_mode",level:3},{value:"Restart MariaDB Replication",id:"restart-mariadb-replication",level:4},{value:"Resuming the cluster resources management",id:"resuming-the-cluster-resources-management",level:2},{value:"Check cluster&#39;s health",id:"check-clusters-health",level:2},{value:"Verifying the platform stability",id:"verifying-the-platform-stability",level:2}],h={toc:d},g="wrapper";function k(e){var{components:t}=e,n=c(e,["components"]);return(0,r.kt)(g,l(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}({},h,n),{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"This chapter describes how to upgrade your Centreon HA platform from version 20.10\nto version 21.10."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("h3",{id:"suspend-cluster-resources-management"},"Suspend cluster resources management"),(0,r.kt)("p",null,"In order to avoid a failover of the cluster during the update, it is necessary to unmanage all Centreon resources, as well as MariaDB."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"pcs resource unmanage centreon\npcs resource unmanage ms_mysql\npcs resource unmanage php7-clone\n")),(0,r.kt)("h3",{id:"perform-a-backup"},"Perform a backup"),(0,r.kt)("p",null,"Be sure that you have fully backed up your environment for the following\nservers:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Central server"),(0,r.kt)("li",{parentName:"ul"},"Database server")),(0,r.kt)("h3",{id:"update-the-rpm-signing-key"},"Update the RPM signing key"),(0,r.kt)("p",null,"For security reasons, the keys used to sign Centreon RPMs are rotated regularly. The last change occurred on October 14, 2021. When upgrading from an older version, you need to go through the ",(0,r.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2515/docs/21.10/security/key-rotation#existing-installation"},"key rotation procedure"),", to remove the old key and install the new one."),(0,r.kt)("h2",{id:"upgrade-process"},"Upgrade process"),(0,r.kt)("h3",{id:"update-the-centreon-repository"},"Update the Centreon repository"),(0,r.kt)("p",null,"Run the following commands:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"yum install -y https://yum.centreon.com/standard/21.10/el7/stable/noarch/RPMS/centreon-release-21.10-5.el7.centos.noarch.rpm\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"WARNING:")," to avoid broken dependencies, please refer to the documentation of the additional modules to update the Centreon Business Repositories.")),(0,r.kt)("h3",{id:"upgrade-php"},"Upgrade PHP"),(0,r.kt)("p",null,"Centreon 21.10 uses PHP in version 8.0."),(0,r.kt)("p",null,"First, you need to install the ",(0,r.kt)("strong",{parentName:"p"},"remi")," repository:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"yum install -y yum-utils\nyum install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\nyum install -y https://rpms.remirepo.net/enterprise/remi-release-7.rpm\n")),(0,r.kt)("p",null,"Then, you need to enable the php 8.0 repository"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"yum-config-manager --enable remi-php80\n")),(0,r.kt)("h3",{id:"upgrade-the-centreon-solution"},"Upgrade the Centreon solution"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Please, make sure all users are logged out from the Centreon web interface\nbefore starting the upgrade procedure.")),(0,r.kt)("p",null,"Clean yum cache:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"yum clean all --enablerepo=*\n")),(0,r.kt)("p",null,"Then upgrade all the components with the following command:"),(0,r.kt)(a.Z,{groupId:"sync",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"HA 2 Nodes",label:"HA 2 Nodes",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"yum remove centreon-ha\nyum update centreon\\*\nyum install centreon-ha-web centreon-ha-common\nmv /etc/centreon-ha/centreon_central_sync.pm.rpmsave /etc/centreon-ha/centreon_central_sync.pm\nmv /etc/centreon-ha/mysql-resources.sh.rpmsave /etc/centreon-ha/mysql-resources.sh\n"))),(0,r.kt)(o.Z,{value:"HA 4 Nodes",label:"HA 4 Nodes",mdxType:"TabItem"},(0,r.kt)("p",null,"On the Central Servers:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"yum remove centreon-ha\nyum update centreon\\*\nyum install centreon-ha-web centreon-ha-common\nmv /etc/centreon-ha/centreon_central_sync.pm.rpmsave /etc/centreon-ha/centreon_central_sync.pm\n")),(0,r.kt)("p",null,"On the Database Servers:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"yum remove centreon-ha\nyum update centreon\\*\nyum install centreon-ha-common\nmv /etc/centreon-ha/mysql-resources.sh.rpmsave /etc/centreon-ha/mysql-resources.sh\n")))),(0,r.kt)("p",null,"The PHP timezone should be set. Run the command on both Central Server nodes:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'echo "date.timezone = Europe/Paris" >> /etc/php.d/50-centreon.ini\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Replace ",(0,r.kt)("strong",{parentName:"p"},"Europe/Paris")," by your time zone. You can find the list of\nsupported time zones ",(0,r.kt)("a",{parentName:"p",href:"http://php.net/manual/en/timezones.php"},"here"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"WARNING")," the following commands must be executed on only one node of the cluster.")),(0,r.kt)(a.Z,{groupId:"sync",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"HA 2 Nodes",label:"HA 2 Nodes",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'pcs resource delete php7 --force\npcs resource create "php" \\\n    systemd:php-fpm \\\n    meta target-role="started" \\\n    op start interval="0s" timeout="30s" \\\n    stop interval="0s" timeout="30s" \\\n    monitor interval="5s" timeout="30s" \\\n    clone\n'))),(0,r.kt)(o.Z,{value:"HA 4 Nodes",label:"HA 4 Nodes",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'pcs resource delete php7 --force\npcs resource create "php" \\\n    systemd:php-fpm \\\n    meta target-role="started" \\\n    op start interval="0s" timeout="30s" \\\n    stop interval="0s" timeout="30s" \\\n    monitor interval="5s" timeout="30s" \\\n    clone\npcs constraint location php-clone avoids @DATABASE_MASTER_NAME@=INFINITY @DATABASE_SLAVE_NAME@=INFINITY\n')))),(0,r.kt)("p",null,"Then to perform the WEB UI upgrade, please ",(0,r.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2515/docs/21.10/upgrade/upgrade-from-20-10#finalizing-the-upgrade"},"follow the official documentation")," Only on the ",(0,r.kt)("strong",{parentName:"p"},"active central node"),"."),(0,r.kt)("p",null,'On the passive central node, move the "install" directory to avoid getting the "upgrade" screen in the WUI in the event of a further exchange of roles.'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mv /usr/share/centreon/www/install /var/lib/centreon/installs/install-update-YYYY-MM-DD\nsudo -u apache /usr/share/centreon/bin/console cache:clear\n")),(0,r.kt)("h3",{id:"removing-cron-jobs"},"Removing cron jobs"),(0,r.kt)("p",null,"The RPM upgrade puts cron job back in place. Remove them to avoid concurrent executions: "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"rm /etc/cron.d/centreon\nrm /etc/cron.d/centstorage\nrm /etc/cron.d/centreon-auto-disco\n")),(0,r.kt)("h3",{id:"reset-the-permissions-for-centreon_central_sync-resource"},"Reset the permissions for centreon_central_sync resource"),(0,r.kt)("p",null,"The RPM upgrade puts the permissions back in place. Change it using these commands:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'chmod 775 /var/log/centreon-engine/\nmkdir /var/log/centreon-engine/archives\nchown centreon-engine: /var/log/centreon-engine/archives\nchmod 775 /var/log/centreon-engine/archives/\nfind /var/log/centreon-engine/ -type f -exec chmod 664 {} \\;\nfind /usr/share/centreon/www/img/media -type d -exec chmod 775 {} \\;\nfind /usr/share/centreon/www/img/media -type f \\( ! -iname ".keep" ! -iname ".htaccess" \\) -exec chmod 664 {} \\;\n')),(0,r.kt)("h3",{id:"clean-broker-memory-files"},"Clean broker memory files"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"WARNING")," perform these commands only the active central node.\nBefore resuming the cluster resources management, to avoid broker issues, cleanup all the ",(0,r.kt)("em",{parentName:"p"},".memory."),", ",(0,r.kt)("em",{parentName:"p"},".unprocessed.")," or ",(0,r.kt)("em",{parentName:"p"},".queue.")," files:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"systemctl stop cbd-sql\nrm -rf /var/lib/centreon-broker/central-broker-master.memory*\nrm -rf /var/lib/centreon-broker/central-broker-master.queue*\nrm -rf /var/lib/centreon-broker/central-broker-master.unprocessed*\nsystemctl start cbd-sql\n")),(0,r.kt)("p",null,"Then perform these commands on the passive central node:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"rm -rf /var/lib/centreon-broker/central-broker-master.memory*\nrm -rf /var/lib/centreon-broker/central-broker-master.queue*\nrm -rf /var/lib/centreon-broker/central-broker-master.unprocessed*\n")),(0,r.kt)("h3",{id:"restart-centreon-process"},"Restart Centreon process"),(0,r.kt)("p",null,"Then to restart all the processes on the active central node:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"systemctl restart cbd-sql cbd gorgoned centengine\n")),(0,r.kt)("p",null,"And on the passive central node:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"systemctl restart cbd\n")),(0,r.kt)("h3",{id:"upgrade-of-mariadb-databases"},"Upgrade of MariaDB Databases"),(0,r.kt)("p",null,"The MariaDB components can now be upgraded."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"WARNING")," the following commands must be executed first on the active\ndatabase node. Once the active database node is in 10.5, you can upgrade the\npassive database node.")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Stop the mariadb service:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"mysqladmin -p shutdown\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Uninstall current version:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"rpm --erase --nodeps --verbose MariaDB-server MariaDB-client MariaDB-shared MariaDB-compat MariaDB-common\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install 10.5 version:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"yum install MariaDB-server-10.5\\* MariaDB-client-10.5\\* MariaDB-shared-10.5\\* MariaDB-compat-10.5\\* MariaDB-common-10.5\\*\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Move the configuration file:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"}," mv /etc/my.cnf.d/server.cnf.rpmsave /etc/my.cnf.d/server.cnf\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Start the mariadb service:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"mysqld_safe &\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Launch the MariaDB upgrade process:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"mysql_upgrade -p\n")))),(0,r.kt)("p",null,"You may not use the option ",(0,r.kt)("inlineCode",{parentName:"p"},"-p")," for ",(0,r.kt)("inlineCode",{parentName:"p"},"mysqladmin")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"mysql_upgrade")," commands\nif you haven't secured your database server."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Refer to the ",(0,r.kt)("a",{parentName:"p",href:"https://mariadb.com/kb/en/mysql_upgrade/"},"official documentation"),"\nif errors occur during this last step.")),(0,r.kt)("h3",{id:"configure-mariadb-slave_parallel_mode"},"Configure MariaDB slave_parallel_mode"),(0,r.kt)("p",null,"Since MariaDB 10.5, the slave_parallel_mode is no longer set up as ",(0,r.kt)("em",{parentName:"p"},"conservative"),".\nIt's necessary to modify the mysql configuration by editing ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/my.cnf.d/server.cnf"),":"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"On the 2 Central servers in HA 2 nodes\nOn the 2 Database servers in HA 4 nodes.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"[server]\n...\nslave_parallel_mode=conservative\n...\n")),(0,r.kt)("h4",{id:"restart-mariadb-replication"},"Restart MariaDB Replication"),(0,r.kt)("p",null,"The replication thread will be down after the upgrade. To restart it\nRun this command ",(0,r.kt)("strong",{parentName:"p"},"on the secondary node:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mysqladmin -p shutdown\n")),(0,r.kt)("p",null,"Verify that the ",(0,r.kt)("inlineCode",{parentName:"p"},"mariadb")," service is now stopped, the following command must return nothing:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ps -ef | grep mariadb[d]\n")),(0,r.kt)("p",null,"Once the service is stopped ",(0,r.kt)("strong",{parentName:"p"},"on the secondary node"),", you will run the synchronization script ",(0,r.kt)("strong",{parentName:"p"},"from the primary node"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"/usr/share/centreon-ha/bin/mysql-sync-bigdb.sh\n")),(0,r.kt)("p",null,"the output of this command must display only ",(0,r.kt)("inlineCode",{parentName:"p"},"OK")," results:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"/usr/share/centreon-ha/bin/mysql-check-status.sh\n")),(0,r.kt)("p",null,"The expected output is:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"Connection Status '@CENTRAL_MASTER_NAME@' [OK]\nConnection Status '@CENTRAL_SLAVE_NAME@' [OK]\nSlave Thread Status [OK]\nPosition Status [OK]\n")),(0,r.kt)("h2",{id:"resuming-the-cluster-resources-management"},"Resuming the cluster resources management"),(0,r.kt)("p",null,"Now that the update is finished, the resources can be managed again:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"pcs resource manage centreon\npcs resource manage ms_mysql\n")),(0,r.kt)("p",null,"It can happen that the replication thread is not running right after installation.\nRestarting the ",(0,r.kt)("inlineCode",{parentName:"p"},"ms_mysql")," resource may fix it.\nYou can also have some ",(0,r.kt)("em",{parentName:"p"},"failed actions")," on the resources.\nCleaning the resource may fix it."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"pcs resource restart ms_mysql\npcs resource cleanup centreon\npcs resource cleanup ms_mysql\n")),(0,r.kt)("h2",{id:"check-clusters-health"},"Check cluster's health"),(0,r.kt)("p",null,"You can monitor the cluster's resources in real time using the ",(0,r.kt)("inlineCode",{parentName:"p"},"crm_mon")," command:"),(0,r.kt)(a.Z,{groupId:"sync",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"HA 2 Nodes",label:"HA 2 Nodes",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"Stack: corosync\nCurrent DC: @CENTRAL_SLAVE_NAME@ (version 1.1.20-5.el7_7.2-3c4c782f70) - partition with quorum\nLast updated: Thu Feb 20 13:14:17 2020\nLast change: Thu Feb 20 09:25:54 2020 by root via crm_attribute on @CENTRAL_MASTER_NAME@\n\n2 nodes configured\n14 resources configured\n\nOnline: [ @CENTRAL_MASTER_NAME@ @CENTRAL_SLAVE_NAME@ ]\n\nActive resources:\n\n Master/Slave Set: ms_mysql-master [ms_mysql]\n     Masters: [ @CENTRAL_MASTER_NAME@ ]\n     Slaves: [ @CENTRAL_SLAVE_NAME@ ]\n Clone Set: cbd_rrd-clone [cbd_rrd]\n     Started: [ @CENTRAL_MASTER_NAME@ @CENTRAL_SLAVE_NAME@ ]\n Resource Group: centreon\n     vip        (ocf::heartbeat:IPaddr2):   Started @CENTRAL_MASTER_NAME@\n     http   (systemd:httpd24-httpd):        Started @CENTRAL_MASTER_NAME@\n     gorgone    (systemd:gorgoned):     Started @CENTRAL_MASTER_NAME@\n     centreon_central_sync  (systemd:centreon-central-sync):        Started @CENTRAL_MASTER_NAME@\n     centreontrapd  (systemd:centreontrapd):        Started @CENTRAL_MASTER_NAME@\n     snmptrapd  (systemd:snmptrapd):    Started @CENTRAL_MASTER_NAME@\n     cbd_central_broker (systemd:cbd-sql):  Started @CENTRAL_MASTER_NAME@\n     centengine (systemd:centengine):   Started @CENTRAL_MASTER_NAME@\n Clone Set: php-clone [php]\n     Started: [ @CENTRAL_MASTER_NAME@ @CENTRAL_SLAVE_NAME@ ]\n"))),(0,r.kt)(o.Z,{value:"HA 4 Nodes",label:"HA 4 Nodes",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[...]\n4 nodes configured\n21 resources configured\n\nOnline: [@CENTRAL_MASTER_NAME@ @CENTRAL_SLAVE_NAME@ @DATABASE_MASTER_NAME@ @DATABASE_SLAVE_NAME@]\n\nActive resources:\n\n Master/Slave Set: ms_mysql-master [ms_mysql]\n     Masters: [@DATABASE_MASTER_NAME@]\n     Slaves: [@DATABASE_SLAVE_NAME@]\n Clone Set: cbd_rrd-clone [cbd_rrd]\n     Started: [@CENTRAL_MASTER@ @CENTRAL_SLAVE_NAME@]\n Resource Group: centreon\n     vip        (ocf::heartbeat:IPaddr2):       Started @CENTRAL_MASTER@\n     http       (systemd:httpd24-httpd):        Started @CENTRAL_MASTER@\n     gorgone    (systemd:gorgoned):     Started @CENTRAL_MASTER_NAME@\n     centreon_central_sync      (systemd:centreon-central-sync):        Started @CENTRAL_MASTER_NAME@\n     cbd_central_broker (systemd:cbd-sql):      Started @CENTRAL_MASTER_NAME@\n     centengine (systemd:centengine):   Started @CENTRAL_MASTER_NAME@\n     centreontrapd      (systemd:centreontrapd):        Started @CENTRAL_MASTER_NAME@\n     snmptrapd  (systemd:snmptrapd):    Started @CENTRAL_MASTER_NAME@\n     vip_mysql       (ocf::heartbeat:IPaddr2):       Started @CENTRAL_MASTER_NAME@\n Clone Set: php-clone [php]\n     Started: [@CENTRAL_MASTER_NAME@ @CENTRAL_SLAVE@]\n")))),(0,r.kt)("h2",{id:"verifying-the-platform-stability"},"Verifying the platform stability"),(0,r.kt)("p",null,"You should now check that eveything works fine:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Access to the web UI menus."),(0,r.kt)("li",{parentName:"ul"},"Poller configuration generation + reload and restart method."),(0,r.kt)("li",{parentName:"ul"},"Schedule immediate check (Central + Pollers) and acknowledge, downtime etc."),(0,r.kt)("li",{parentName:"ul"},"Move resources or reboot active server and check again that everything is fine.")))}k.isMDXComponent=!0}}]);