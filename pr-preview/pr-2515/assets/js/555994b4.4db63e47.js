"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[14282],{211724:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>p,metadata:()=>u,toc:()=>m});n(667294);var l=n(603905),r=n(451715),a=n(907626);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function i(e,t){if(null==e)return{};var n,l,r=function(e,t){if(null==e)return{};var n,l,r={},a=Object.keys(e);for(l=0;l<a.length;l++)n=a[l],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)n=a[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const p={id:"using-packages",title:"Using packages"},c=void 0,u={unversionedId:"installation/installation-of-a-poller/using-packages",id:"version-21.10/installation/installation-of-a-poller/using-packages",title:"Using packages",description:"Centreon provides RPM packages for its products through the Centreon Open",source:"@site/versioned_docs/version-21.10/installation/installation-of-a-poller/using-packages.md",sourceDirName:"installation/installation-of-a-poller",slug:"/installation/installation-of-a-poller/using-packages",permalink:"/centreon-documentation/pr-preview/pr-2515/docs/21.10/installation/installation-of-a-poller/using-packages",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/versioned_docs/version-21.10/installation/installation-of-a-poller/using-packages.md",tags:[],version:"21.10",lastUpdatedAt:1692886463,formattedLastUpdatedAt:"Aug 24, 2023",frontMatter:{id:"using-packages",title:"Using packages"},sidebar:"version-21.10/docs",previous:{title:"Using Centreon ISO",permalink:"/centreon-documentation/pr-preview/pr-2515/docs/21.10/installation/installation-of-a-poller/using-centreon-iso"},next:{title:"Using Centreon ISO",permalink:"/centreon-documentation/pr-preview/pr-2515/docs/21.10/installation/installation-of-a-remote-server/using-centreon-iso"}},d={},m=[{value:"Pre-installation steps",id:"pre-installation-steps",level:2},{value:"Disable SELinux",id:"disable-selinux",level:3},{value:"Configure or disable firewall",id:"configure-or-disable-firewall",level:3},{value:"Server name",id:"server-name",level:3},{value:"Install the repositories",id:"install-the-repositories",level:3},{value:"Redhat CodeReady Builder repository",id:"redhat-codeready-builder-repository",level:4},{value:"Redhat PowerTools repository",id:"redhat-powertools-repository",level:4},{value:"Oracle CodeReady Builder repository",id:"oracle-codeready-builder-repository",level:4},{value:"Redhat Software Collections repository",id:"redhat-software-collections-repository",level:4},{value:"Centreon repository",id:"centreon-repository",level:4},{value:"Installation",id:"installation",level:2},{value:"Register the server",id:"register-the-server",level:2},{value:"Main errors messages",id:"main-errors-messages",level:3},{value:"Add the Poller to configuration",id:"add-the-poller-to-configuration",level:2},{value:"Secure your platform",id:"secure-your-platform",level:2}],k={toc:m},g="wrapper";function h(e){var{components:t}=e,n=i(e,["components"]);return(0,l.kt)(g,s(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},l=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),l.forEach((function(t){o(e,t,n[t])}))}return e}({},k,n),{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"Centreon provides RPM packages for its products through the Centreon Open\nSources version available free of charge in our repository."),(0,l.kt)("p",null,"These packages have been successfully tested in CentOS 7 and 8 environments."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Due to Red Hat's stance on CentOS 8, we suggest not to use said version for\nyour production environment. Nevertheless, these packages for CentOS 8 are\ncompatible with RHEL 8 and Oracle Linux 8 versions.")),(0,l.kt)("h2",{id:"pre-installation-steps"},"Pre-installation steps"),(0,l.kt)("h3",{id:"disable-selinux"},"Disable SELinux"),(0,l.kt)("p",null,"SELinux should be disabled. To do this, you have to edit the file\n",(0,l.kt)("strong",{parentName:"p"},"/etc/selinux/config")," and replace ",(0,l.kt)("strong",{parentName:"p"},"enforcing")," by ",(0,l.kt)("strong",{parentName:"p"},"disabled"),", or by\nrunning the following command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"sed -i s/^SELINUX=.*$/SELINUX=disabled/ /etc/selinux/config\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Reboot your operating system to apply the change.")),(0,l.kt)("p",null,"After system startup, perform a quick check of the SELinux status:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"$ getenforce\nDisabled\n")),(0,l.kt)("h3",{id:"configure-or-disable-firewall"},"Configure or disable firewall"),(0,l.kt)("p",null,"Add firewall rules or disable the firewall by running the following commands:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl stop firewalld\nsystemctl disable firewalld\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"You can find instructions ",(0,l.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2515/docs/21.10/administration/secure-platform#enable-firewalld"},"here")," to configure firewalld.")),(0,l.kt)("h3",{id:"server-name"},"Server name"),(0,l.kt)("p",null,"If you want, you can change the server's name using the following command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"hostnamectl set-hostname new-server-name\n")),(0,l.kt)("p",null,"Replace ",(0,l.kt)("strong",{parentName:"p"},"new-server-name")," by the name you want. Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"hostnamectl set-hostname poller1\n")),(0,l.kt)("h3",{id:"install-the-repositories"},"Install the repositories"),(0,l.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,l.kt)(a.Z,{value:"RHEL 8",label:"RHEL 8",mdxType:"TabItem"},(0,l.kt)("h4",{id:"redhat-codeready-builder-repository"},"Redhat CodeReady Builder repository"),(0,l.kt)("p",null,"To install Centreon you will need to enable the official CodeReady Builder\nrepository supported by Redhat."),(0,l.kt)("p",null,"Enable the CodeReady Builder repository using these commands:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"dnf -y install dnf-plugins-core https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm\nsubscription-manager repos --enable codeready-builder-for-rhel-8-x86_64-rpms\n"))),(0,l.kt)(a.Z,{value:"CentOS 8",label:"CentOS 8",mdxType:"TabItem"},(0,l.kt)("h4",{id:"redhat-powertools-repository"},"Redhat PowerTools repository"),(0,l.kt)("p",null,"To install Centreon you will need to enable the official PowerTools repository\nsupported by Redhat."),(0,l.kt)("p",null,"Enable the PowerTools repository using these commands:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"For Centos 8.2:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"dnf -y install dnf-plugins-core epel-release\ndnf config-manager --set-enabled PowerTools\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"For CentOS 8.3 and CentOS Stream:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"dnf -y install dnf-plugins-core epel-release\ndnf config-manager --set-enabled powertools\n"))))),(0,l.kt)(a.Z,{value:"Oracle Linux 8",label:"Oracle Linux 8",mdxType:"TabItem"},(0,l.kt)("h4",{id:"oracle-codeready-builder-repository"},"Oracle CodeReady Builder repository"),(0,l.kt)("p",null,"To install Centreon you will need to enable the official Oracle CodeReady\nBuilder repository supported by Oracle."),(0,l.kt)("p",null,"Enable the repository using these commands:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"dnf -y install dnf-plugins-core oracle-epel-release-el8\ndnf config-manager --set-enabled ol8_codeready_builder\n"))),(0,l.kt)(a.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,l.kt)("h4",{id:"redhat-software-collections-repository"},"Redhat Software Collections repository"),(0,l.kt)("p",null,"To install Centreon you will need to set up the official Software Collections\nrepository supported by Redhat."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Software collections are required for installing PHP 7 and associated libraries.")),(0,l.kt)("p",null,"Install the Software Collections repository using this command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"yum install -y centos-release-scl\n")))),(0,l.kt)("h4",{id:"centreon-repository"},"Centreon repository"),(0,l.kt)("p",null,"To install Centreon software from the repository, you should first install the\ncentreon-release package, which will provide the repository file."),(0,l.kt)("p",null,"Install the Centreon repository using this command:"),(0,l.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,l.kt)(a.Z,{value:"RHEL / CentOS / Oracle Linux 8",label:"RHEL / CentOS / Oracle Linux 8",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y https://yum.centreon.com/standard/21.10/el8/stable/noarch/RPMS/centreon-release-21.10-5.el8.noarch.rpm\n"))),(0,l.kt)(a.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"yum install -y https://yum.centreon.com/standard/21.10/el7/stable/noarch/RPMS/centreon-release-21.10-5.el7.centos.noarch.rpm\n")))),(0,l.kt)("h2",{id:"installation"},"Installation"),(0,l.kt)("p",null,"To install the monitoring engine, run the command:"),(0,l.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,l.kt)(a.Z,{value:"RHEL / CentOS / Oracle Linux 8",label:"RHEL / CentOS / Oracle Linux 8",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y centreon-poller-centreon-engine\n"))),(0,l.kt)(a.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"yum install -y centreon-poller-centreon-engine\n")))),(0,l.kt)("p",null,"To make services start automatically during system bootup, run the following\ncommand:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl enable centreon centengine centreontrapd snmptrapd\n")),(0,l.kt)("p",null,"Passive monitoring services can be started:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl start centreontrapd snmptrapd\n")),(0,l.kt)("p",null,"Restart Centreon Engine:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart centengine\n")),(0,l.kt)("h2",{id:"register-the-server"},"Register the server"),(0,l.kt)("p",null,"To turn the server into a poller and to register it to the Central server or to a Remote server, execute the following command on the future poller:"),(0,l.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,l.kt)(a.Z,{value:"RHEL / CentOS / Oracle Linux 8",label:"RHEL / CentOS / Oracle Linux 8",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"/usr/share/centreon/bin/registerServerTopology.sh -u <API_ACCOUNT> \\\n-t poller -h <IP_TARGET_NODE> -n <POLLER_NAME>\n")),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"/usr/share/centreon/bin/registerServerTopology.sh -u admin -t poller -h 192.168.0.1 -n poller-1\n"))),(0,l.kt)(a.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"/usr/share/centreon/bin/registerServerTopology.sh -u <API_ACCOUNT> \\\n-t poller -h <IP_TARGET_NODE> -n <POLLER_NAME>\n")),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"/usr/share/centreon/bin/registerServerTopology.sh -u admin -t poller -h 192.168.0.1 -n poller-1\n")))),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Replace ",(0,l.kt)("strong",{parentName:"p"},"<IP_TARGET_NODE>")," by the IP of the central server or remote server that you want to link the poller to (IP as seen by the poller)")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"The ",(0,l.kt)("strong",{parentName:"p"},"<API_ACCOUNT>")," must have access to the configuration API. You can use the default ",(0,l.kt)("strong",{parentName:"p"},"admin")," account.")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"If you need to change the HTTP method or the port, you can use the following format for the ",(0,l.kt)("strong",{parentName:"p"},"-h")," option:\n",(0,l.kt)("inlineCode",{parentName:"p"},"HTTPS://<IP_TARGET_NODE>:PORT"))),(0,l.kt)("p",null,"Then follow instructions by"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Entering your password:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"Please enter the password of 192.168.0.1:\n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Select the IP adress if multiple network interfaces exist:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"Which IP do you want to use as CURRENT NODE IP ?\n1) 192.168.0.2\n2) 192.168.0.3\n1\n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Then validate the information:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"Summary of the informations that will be send:\n\nApi Connection:\nusername: admin\npassword: ******\ntarget server: 192.168.0.1\n\nPending Registration Server:\nname: poller-1\ntype: poller\naddress: 192.168.0.2\n\nDo you want to register this server with those information ? (y/n)y\n")))),(0,l.kt)("p",null,"You will receive the validation of the Centreon central or the Remote Server server:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"2020-10-16T17:19:37+02:00 [INFO]: The CURRENT NODE 'poller': 'poller-1@192.168.0.2' linked to TARGET NODE: '192.168.0.1' has been added\n")),(0,l.kt)("h3",{id:"main-errors-messages"},"Main errors messages"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"2020-10-20T10:23:15+02:00 [ERROR]: Invalid credentials\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Your credentials are incorrect for the ",(0,l.kt)("strong",{parentName:"p"},"<API_ACCOUNT>"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"2020-10-20T10:24:59+02:00 [ERROR]: Access Denied.\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"The ",(0,l.kt)("strong",{parentName:"p"},"<API_ACCOUNT>")," doesn't have access to configuration API.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"Failed connect to 192.168.0.1:444; Connection refused\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Unable to access to the API. Please check ",(0,l.kt)("strong",{parentName:"p"},"<IP_TARGET_NODE>"),", scheme and port.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"2020-10-20T10:39:30+02:00 [ERROR]: Can\u2019t connect to the API using: https://192.168.0.1:443/centreon/api/latest/login\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"The access url is not complete or invalide. Use the ",(0,l.kt)("strong",{parentName:"p"},"--root")," option to define the API URL Path. For example: ",(0,l.kt)("strong",{parentName:"p"},"--root monitoring"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"2020-10-20T10:42:23+02:00 [ERROR]: No route found for \u201cPOST /centreon/api/latest/platform/topology\u201d\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Your Centreon target version is invalid. It should be greater or equal to 21.10.")),(0,l.kt)("h2",{id:"add-the-poller-to-configuration"},"Add the Poller to configuration"),(0,l.kt)("p",null,"Go to the ",(0,l.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2515/docs/21.10/monitoring/monitoring-servers/add-a-poller-to-configuration"},"Add a Poller to configuration"),"."),(0,l.kt)("h2",{id:"secure-your-platform"},"Secure your platform"),(0,l.kt)("p",null,"Don't forget to secure your Centreon platform following our\n",(0,l.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2515/docs/21.10/administration/secure-platform"},"recommendations")))}h.isMDXComponent=!0}}]);