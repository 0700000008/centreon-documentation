"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[27877],{41141:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>p,default:()=>N,frontMatter:()=>u,metadata:()=>d,toc:()=>c});n(667294);var a=n(603905),r=n(451715),l=n(907626);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const u={id:"operatingsystems-windows-snmp",title:"Windows SNMP"},p=void 0,d={unversionedId:"integrations/plugin-packs/procedures/operatingsystems-windows-snmp",id:"integrations/plugin-packs/procedures/operatingsystems-windows-snmp",title:"Windows SNMP",description:"Vue d'ensemble",source:"@site/i18n/fr/docusaurus-plugin-content-docs-pp/current/integrations/plugin-packs/procedures/operatingsystems-windows-snmp.md",sourceDirName:"integrations/plugin-packs/procedures",slug:"/integrations/plugin-packs/procedures/operatingsystems-windows-snmp",permalink:"/fr/pp/integrations/plugin-packs/procedures/operatingsystems-windows-snmp",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/i18n/fr/docusaurus-plugin-content-docs-pp/current/integrations/plugin-packs/procedures/operatingsystems-windows-snmp.md",tags:[],version:"current",frontMatter:{id:"operatingsystems-windows-snmp",title:"Windows SNMP"},sidebar:"pp",previous:{title:"Windows NSClient API",permalink:"/fr/pp/integrations/plugin-packs/procedures/operatingsystems-windows-nsclient-05-restapi"},next:{title:"Windows WSMAN",permalink:"/fr/pp/integrations/plugin-packs/procedures/operatingsystems-windows-wsman"}},m={},c=[{value:"Vue d&#39;ensemble",id:"vue-densemble",level:2},{value:"Contenu du pack de supervision",id:"contenu-du-pack-de-supervision",level:2},{value:"Objets supervis\xe9s",id:"objets-supervis\xe9s",level:3},{value:"R\xe8gles de d\xe9couvertes",id:"r\xe8gles-de-d\xe9couvertes",level:3},{value:"M\xe9triques collect\xe9es",id:"m\xe9triques-collect\xe9es",level:2},{value:"Pr\xe9requis",id:"pr\xe9requis",level:2},{value:"Configuration du serveur SNMP",id:"configuration-du-serveur-snmp",level:2},{value:"Flux r\xe9seaux",id:"flux-r\xe9seaux",level:2},{value:"Installation",id:"installation",level:2},{value:"Configuration",id:"configuration",level:2},{value:"FAQ",id:"faq",level:2},{value:"Comment tester en ligne de commande et quelles significations portent les options principales ?",id:"comment-tester-en-ligne-de-commande-et-quelles-significations-portent-les-options-principales-",level:3},{value:"UNKNOWN: SNMP GET Request : Timeout",id:"unknown-snmp-get-request--timeout",level:3},{value:"UNKNOWN: SNMP Table Request : (genError) A general failure occured",id:"unknown-snmp-table-request--generror-a-general-failure-occured",level:3},{value:"UNKNOWN: Can&#39;t construct cache...&quot; pour Windows 2003 Server - Traffic Global",id:"unknown-cant-construct-cache-pour-windows-2003-server---traffic-global",level:3},{value:"Valeur n\xe9gative sur certain disque du mode storage",id:"valeur-n\xe9gative-sur-certain-disque-du-mode-storage",level:3}],g={toc:c},k="wrapper";function N(e){var{components:t}=e,n=o(e,["components"]);return(0,a.kt)(k,i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){s(e,t,n[t])}))}return e}({},g,n),{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"vue-densemble"},"Vue d'ensemble"),(0,a.kt)("p",null,"Windows est un syst\xe8me d\u2019exploitation, autrement dit, un ensemble de programmes\net logiciels permettant de g\xe9rer les ressources d\u2019un ordinateur."),(0,a.kt)("h2",{id:"contenu-du-pack-de-supervision"},"Contenu du pack de supervision"),(0,a.kt)("h3",{id:"objets-supervis\xe9s"},"Objets supervis\xe9s"),(0,a.kt)("p",null,"Tous les syst\xe8mes d'exploitation Microsoft Windows sont support\xe9s:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Windows serveur (2003, 2012, 2016)"),(0,a.kt)("li",{parentName:"ul"},"Windows client (7, 8, 10)"),(0,a.kt)("li",{parentName:"ul"},"...")),(0,a.kt)("h3",{id:"r\xe8gles-de-d\xe9couvertes"},"R\xe8gles de d\xe9couvertes"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Host",label:"Host",mdxType:"TabItem"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Nom de la r\xe8gle"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"App-Protocol-SNMP-HostDiscovery"),(0,a.kt)("td",{parentName:"tr",align:null},"D\xe9couvrez vos serveurs Windows en scannant les agents SNMP sur un sous-r\xe9seau donn\xe9"))))),(0,a.kt)(l.Z,{value:"Services",label:"Services",mdxType:"TabItem"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Nom de la r\xe8gle"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"OS-Windows-SNMP-Disk-Name"),(0,a.kt)("td",{parentName:"tr",align:null},"D\xe9couvre les disques/partitions et leur taux d'occupation")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"OS-Windows-SNMP-Traffic-Name"),(0,a.kt)("td",{parentName:"tr",align:null},"D\xe9couvre les interfaces r\xe9seaux et supervise le statut et l'utilisation de la bande passante")))))),(0,a.kt)("h2",{id:"m\xe9triques-collect\xe9es"},"M\xe9triques collect\xe9es"),(0,a.kt)("p",null,"Au del\xe0 des m\xe9triques pr\xe9sent\xe9es en d\xe9tails ici, les contr\xf4les suivants sont\ndisponibles:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"System clock synchronisation : V\xe9rifications de la synchronisation de la\ndate et de l'heure."),(0,a.kt)("li",{parentName:"ul"},"Process state : Etat d'un ou plusieurs processus"),(0,a.kt)("li",{parentName:"ul"},"Service state : Etat d'un ou plusieurs services")),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Cpu",label:"Cpu",mdxType:"TabItem"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Nom de la m\xe9trique"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"cpu.utilization.percentage"),(0,a.kt)("td",{parentName:"tr",align:null},"CPU utilization. Unit: %")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"core.cpu.utilization.percentage"),(0,a.kt)("td",{parentName:"tr",align:null},"CPU Core utilization. Units: %"))))),(0,a.kt)(l.Z,{value:"Memory",label:"Memory",mdxType:"TabItem"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Nom de la m\xe9trique"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"memory.usage.bytes"),(0,a.kt)("td",{parentName:"tr",align:null},"Memory usage on the device. Unit: %"))))),(0,a.kt)(l.Z,{value:"Traffic",label:"Traffic",mdxType:"TabItem"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Nom de la m\xe9trique"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"status"),(0,a.kt)("td",{parentName:"tr",align:null},"Status of monitored interface")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"interface.traffic.in.bitspersecond"),(0,a.kt)("td",{parentName:"tr",align:null},"Incoming and incoming traffic going through the interface. Units: B/s & %")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"interface.traffic.out.bitspersecond"),(0,a.kt)("td",{parentName:"tr",align:null},"Outgoing and incoming traffic going through the interface. Units: B/s & %")))),(0,a.kt)("p",null,"Il est possible de filtrer sur le nom d'une interface en utilisant une REGEXP de\nla forme : ",(0,a.kt)("inlineCode",{parentName:"p"},"--interface='^card0$' --name"))),(0,a.kt)(l.Z,{value:"Swap",label:"Swap",mdxType:"TabItem"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Nom de la m\xe9trique"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"swap.usage.bytes"),(0,a.kt)("td",{parentName:"tr",align:null},"Swap usage Unit: Bytes"))))),(0,a.kt)(l.Z,{value:"Storage",label:"Storage",mdxType:"TabItem"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Nom de la m\xe9trique"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"storage.partitions.count"),(0,a.kt)("td",{parentName:"tr",align:null},"Number of partition")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"storage.space.usage.bytes"),(0,a.kt)("td",{parentName:"tr",align:null},"Space usage of disk. Units: Bytes"))))),(0,a.kt)(l.Z,{value:"Uptime",label:"Uptime",mdxType:"TabItem"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Nom de la m\xe9trique"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"uptime"),(0,a.kt)("td",{parentName:"tr",align:null},"Status of last boot of serveur")))))),(0,a.kt)("h2",{id:"pr\xe9requis"},"Pr\xe9requis"),(0,a.kt)("p",null,"Configurer le service SNMP en v2 pour superviser le syst\xe8me Windows."),(0,a.kt)("h2",{id:"configuration-du-serveur-snmp"},"Configuration du serveur SNMP"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Les instructions ci-apr\xe8s peuvent changer en fonction de la version de\nvotre Windows. R\xe9f\xe9rez vous \xe0 la documentation officielle de Microsoft le cas\n\xe9ch\xe9ant.")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Installer la fonctionnalit\xe9 SNMP dans le gestionnaire de serveur de Windows :"),(0,a.kt)("p",{parentName:"li"},"Gestionnaire de serveur =",">"," Ajouter des r\xf4les et des fonctionnailt\xe9es =",">","\nInstallation bas\xe9e sur un r\xf4le ou une fonctionnalit\xe9 =",">"," Service SNMP")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},'Param\xe9trer le service "SNMP agent" avec votre communaut\xe9 et les IP des\nCollecteurs qui feront les requ\xeates.')),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Red\xe9marrer le service SNMP apr\xe8s avoir configur\xe9 celui-ci."))),(0,a.kt)("h2",{id:"flux-r\xe9seaux"},"Flux r\xe9seaux"),(0,a.kt)("p",null,"La communication doit \xeatre possible sur le port UDP 161 depuis le collecteur\nCentreon vers le serveur Windows supervis\xe9."),(0,a.kt)("h2",{id:"installation"},"Installation"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Online License",label:"Online License",mdxType:"TabItem"},(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Installer le Plugin sur l'ensemble des collecteurs Centreon supervisant des\nserveurs Windows:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"yum install centreon-plugin-Operatingsystems-Windows-Snmp\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Installer le pack depuis la page ",(0,a.kt)("strong",{parentName:"p"},"Configuration > Gestionnaire de connecteurs de supervision"))))),(0,a.kt)(l.Z,{value:"Offline License",label:"Offline License",mdxType:"TabItem"},(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Installer le Plugin sur l'ensemble des collecteurs Centreon supervisant des\nserveurs Windows:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"yum install centreon-plugin-Operatingsystems-Windows-Snmp\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Installer le RPM contenant les mod\xe8les de supervision"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"yum install centreon-pack-operatingsystems-windows-snmp\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Installer le pack depuis la page ",(0,a.kt)("strong",{parentName:"p"},"Configuration > Gestionnaire de connecteurs de supervision")))))),(0,a.kt)("h2",{id:"configuration"},"Configuration"),(0,a.kt)("p",null,'Dans le formulaire de cr\xe9ation de l\'h\xf4te sur l\'interface Web de Centreon, il est\nn\xe9cessaire de renseigner les valeurs pour les champs "Snmp Community" et "Snmp\nVersion".'),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Si vous utilisez SNMP en version 3, vous devez configurer les param\xe8tres sp\xe9cifiques associ\xe9s via la macro SNMPEXTRAOPTIONS.\nPlus d'informations dans la section ",(0,a.kt)("a",{parentName:"p",href:"/fr/pp/integrations/plugin-packs/getting-started/how-to-guides/troubleshooting-plugins#snmpv3-options-mapping"},"Troubleshooting SNMP"),". ")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Obligatoire"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Nom"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"}),(0,a.kt)("td",{parentName:"tr",align:"left"},"SNMPEXTRAOPTIONS"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Configure your own SNMPv3 credentials combo")))),(0,a.kt)("h2",{id:"faq"},"FAQ"),(0,a.kt)("h3",{id:"comment-tester-en-ligne-de-commande-et-quelles-significations-portent-les-options-principales-"},"Comment tester en ligne de commande et quelles significations portent les options principales ?"),(0,a.kt)("p",null,"A partir du moment ou la sonde est install\xe9e, vous pouvez tester directement\ndepuis votre poller de supervision avec l'utilisateur centreon-engine :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"su - centreon-engine\n/usr/lib/centreon/plugins/centreon_windows_snmp.pl \\\n    --plugin=os::windows::snmp::plugin \\\n    --mode=service \\\n    --hostname=10.30.2.114 \\\n    --snmp-version='2c' \\\n    --snmp-community='windows_ro' \\\n    --snmp-port=1616 \\\n    --service='firefox' \\\n    --warning= \\\n    --critical=1: \\\n    --state='' \\\n    --regexp\n")),(0,a.kt)("p",null,"La commande renvoie alors :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"CRITICAL: Service problem 'firefox'\n")),(0,a.kt)("p",null,"La commande v\xe9rifie l'\xe9tat d'un Service (",(0,a.kt)("inlineCode",{parentName:"p"},"--mode=service"),") sur une machine ayant\npour adresse 10.30.2.114 (",(0,a.kt)("inlineCode",{parentName:"p"},"--hostname=10.30.2.114"),") en version 2 du protocol\nSNMP et avec la communaut\xe9 windows","_","ro  (",(0,a.kt)("inlineCode",{parentName:"p"},"--snmp-community='windows_ro'"),"). Le\nservice supervis\xe9 est Firefox (",(0,a.kt)("inlineCode",{parentName:"p"},"firefox"),")"),(0,a.kt)("p",null,"Tous les modes sont affichables via la commande suivante:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"/usr/lib/centreon/plugins/centreon_windows_snmp.pl \\\n    --plugin=os::windows::snmp::plugin \\\n    --list-mode\n")),(0,a.kt)("p",null,"Les options des diff\xe9rents modes sont consultables via le help du mode:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"/usr/lib/centreon/plugins/centreon_windows_snmp.pl \\\n    --plugin=os::windows::snmp::plugin \\\n    --mode=service \\\n    --help\n")),(0,a.kt)("h3",{id:"unknown-snmp-get-request--timeout"},"UNKNOWN: SNMP GET Request : Timeout"),(0,a.kt)("p",null,"Si vous obtenez ce message, cela signifie que vous ne parvenez pas \xe0 contacter\nle serveur Windows sur le port 161, ou alors que la communaut\xe9 SNMP configur\xe9e\nn'est pas correcte. Il est \xe9galement possible qu'un firewall bloque le flux."),(0,a.kt)("h3",{id:"unknown-snmp-table-request--generror-a-general-failure-occured"},"UNKNOWN: SNMP Table Request : (genError) A general failure occured"),(0,a.kt)("p",null,"Un patch a \xe9t\xe9 fait pour r\xe9soudre cette erreur qui vient de l'agent SNMP de\nWindows (N'oubliez pas de mettre \xe0 jour votre plugins et votre pack). Ce patch\nne marche pas pour toutes les versions de Windows Serveur. Il faudra alors\nutiliser l'agent NSClient RestAPI pour une supervision exhaustive."),(0,a.kt)("h3",{id:"unknown-cant-construct-cache-pour-windows-2003-server---traffic-global"},"UNKNOWN: Can't construct cache...\" pour Windows 2003 Server - Traffic Global"),(0,a.kt)("p",null,'Ajoutez dans les "EXTRAOPTIONS" des services les options suivantes :'),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"--oid-display='ifDesc' --oid-filter='ifDesc'\n")),(0,a.kt)("h3",{id:"valeur-n\xe9gative-sur-certain-disque-du-mode-storage"},"Valeur n\xe9gative sur certain disque du mode storage"),(0,a.kt)("p",null,"Il s'agit d'un comportement connu de l'agent SNMP de Windows. La valeur \"Size\"\net \"Used\" se trouvent sur un entier en 32 bits. Il n'y a pas de solution mis \xe0\npar utiliser un autre agent de monitoring comme NSClient++."))}N.isMDXComponent=!0}}]);