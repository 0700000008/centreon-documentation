"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[28590],{603905:(e,r,n)=>{n.d(r,{Zo:()=>s,kt:()=>m});var t=n(667294);function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function l(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function i(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?l(Object(n),!0).forEach((function(r){o(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function a(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},l=Object.keys(e);for(t=0;t<l.length;t++)n=l[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)n=l[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=t.createContext({}),c=function(e){var r=t.useContext(u),n=r;return e&&(n="function"==typeof e?e(r):i(i({},r),e)),n},s=function(e){var r=c(e.components);return t.createElement(u.Provider,{value:r},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var r=e.children;return t.createElement(t.Fragment,{},r)}},g=t.forwardRef((function(e,r){var n=e.components,o=e.mdxType,l=e.originalType,u=e.parentName,s=a(e,["components","mdxType","originalType","parentName"]),p=c(n),g=o,m=p["".concat(u,".").concat(g)]||p[g]||d[g]||l;return n?t.createElement(m,i(i({ref:r},s),{},{components:n})):t.createElement(m,i({ref:r},s))}));function m(e,r){var n=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var l=n.length,i=new Array(l);i[0]=g;var a={};for(var u in r)hasOwnProperty.call(r,u)&&(a[u]=r[u]);a.originalType=e,a[p]="string"==typeof e?e:o,i[1]=a;for(var c=2;c<l;c++)i[c]=n[c];return t.createElement.apply(null,i)}return t.createElement.apply(null,n)}g.displayName="MDXCreateElement"},357980:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>s,contentTitle:()=>u,default:()=>m,frontMatter:()=>a,metadata:()=>c,toc:()=>p});n(667294);var t=n(603905);function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function l(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):function(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})),e}function i(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},l=Object.keys(e);for(t=0;t<l.length;t++)n=l[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)n=l[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const a={id:"developer-gorgone-pull-mode",title:"Configurer Gorgone en mode pull"},u=void 0,c={unversionedId:"developer/developer-gorgone-pull-mode",id:"version-22.04/developer/developer-gorgone-pull-mode",title:"Configurer Gorgone en mode pull",description:"Cette proc\xe9dure d\xe9crit comment configurer Gorgone entre un collecteur distant et un serveur central.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-22.04/developer/developer-gorgone-pull-mode.md",sourceDirName:"developer",slug:"/developer/developer-gorgone-pull-mode",permalink:"/fr/docs/22.04/developer/developer-gorgone-pull-mode",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/i18n/fr/docusaurus-plugin-content-docs/version-22.04/developer/developer-gorgone-pull-mode.md",tags:[],version:"22.04",lastUpdatedAt:1690809822,formattedLastUpdatedAt:"31 juil. 2023",frontMatter:{id:"developer-gorgone-pull-mode",title:"Configurer Gorgone en mode pull"},sidebar:"version-22.04/docs",previous:{title:"G\xe9rer la communication client/serveur",permalink:"/fr/docs/22.04/developer/developer-gorgone-client-server-communication"},next:{title:"Configurer Gorgone en mode rebound",permalink:"/fr/docs/22.04/developer/developer-gorgone-rebound-mode"}},s={},p=[{value:"C\xf4t\xe9 collecteur distant",id:"c\xf4t\xe9-collecteur-distant",level:2},{value:"Pr\xe9requis d&#39;installation",id:"pr\xe9requis-dinstallation",level:3},{value:"Configuration",id:"configuration",level:3},{value:"C\xf4t\xe9 serveur central",id:"c\xf4t\xe9-serveur-central",level:2},{value:"Pr\xe9requis d&#39;installation",id:"pr\xe9requis-dinstallation-1",level:3},{value:"Configuration",id:"configuration-1",level:3}],d={toc:p},g="wrapper";function m(e){var{components:r}=e,n=i(e,["components"]);return(0,t.kt)(g,l(function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){o(e,r,n[r])}))}return e}({},d,n),{components:r,mdxType:"MDXLayout"}),(0,t.kt)("p",null,"Cette proc\xe9dure d\xe9crit comment configurer Gorgone entre un collecteur distant et un serveur central."),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},"Le mode pull permet au collecteur de fonctionner comme un client et de se connecter au central (qui sera le serveur). ")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},"Le mode pull est utilis\xe9 lorsque des pare-feu sont install\xe9s sur les collecteurs et emp\xeachent le trafic entrant.")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},"Le mode pull est utilis\xe9 lorsque le central est dans le Cloud et que les collecteurs ne sont pas joignables via les adresses IP habituelles. Le mode pull (ou reverse) est alors utilis\xe9 pour que chaque collecteur initie une connexion \xe0 l'adresse IP publique du central. Pour en savoir plus sur ce cas d'utilisation, consultez ",(0,t.kt)("a",{parentName:"p",href:"https://thewatch.centreon.com/product-how-to-21/how-to-use-the-gorgone-pull-mode-374"},"cet article"),"."))),(0,t.kt)("blockquote",null,(0,t.kt)("p",{parentName:"blockquote"},"Note : notre exemple utilise la configuration d\xe9crite ci-dessous (vous devez adapter la proc\xe9dure \xe0 votre propre configuration).")),(0,t.kt)("p",null,"Serveur central :"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"Adresse : 10.30.2.203")),(0,t.kt)("p",null,"Collecteur distant :"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"ID : 6 (configur\xe9 dans l'interface Centreon avec le protocole ZMQ. Vous pouvez obtenir cet identifiant \xe0 partir de l'interface Centreon)."),(0,t.kt)("li",{parentName:"ul"},"Addresse : 10.30.2.179"),(0,t.kt)("li",{parentName:"ul"},"Empreinte de la cl\xe9 publique RSA : nJSH9nZN2ugQeksHif7Jtv19RQA58yjxfX-Cpnhx09s")),(0,t.kt)("h2",{id:"c\xf4t\xe9-collecteur-distant"},"C\xf4t\xe9 collecteur distant"),(0,t.kt)("h3",{id:"pr\xe9requis-dinstallation"},"Pr\xe9requis d'installation"),(0,t.kt)("p",null,"Le collecteur distant et Gorgone doivent \xeatre install\xe9s."),(0,t.kt)("h3",{id:"configuration"},"Configuration"),(0,t.kt)("p",null,"Configurez le fichier ",(0,t.kt)("strong",{parentName:"p"},"/etc/centreon-gorgone/config.d/40-gorgoned.yaml")," de la mani\xe8re suivante :"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-shell"},'name:  distant-server\ndescription: Configuration for distant server\ngorgone:\n  gorgonecore:\n    id: 6\n    privkey: "/var/lib/centreon-gorgone/.keys/rsakey.priv.pem"\n    pubkey: "/var/lib/centreon-gorgone/.keys/rsakey.pub.pem"\n\n  modules:\n    - name: action\n      package: gorgone::modules::core::action::hooks\n      enable: true\n\n    - name: engine\n      package: gorgone::modules::centreon::engine::hooks\n      enable: true\n      command_file: "/var/lib/centreon-engine/rw/centengine.cmd"\n\n    - name: pull\n      package: "gorgone::modules::core::pull::hooks"\n      enable: true\n      target_type: tcp\n      target_path: 10.30.2.203:5556\n      ping: 1\n')),(0,t.kt)("h2",{id:"c\xf4t\xe9-serveur-central"},"C\xf4t\xe9 serveur central"),(0,t.kt)("h3",{id:"pr\xe9requis-dinstallation-1"},"Pr\xe9requis d'installation"),(0,t.kt)("p",null,"Le serveur central et Gorgone doivent \xeatre install\xe9s."),(0,t.kt)("h3",{id:"configuration-1"},"Configuration"),(0,t.kt)("p",null,"Configurez le fichier ",(0,t.kt)("strong",{parentName:"p"},"/etc/centreon-gorgone/config.d/40-gorgoned.yaml")," de la mani\xe8re suivante :"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-shell"},'...\ngorgone:\n  gorgonecore:\n    ...\n    external_com_type: tcp\n    external_com_path: "*:5556"\n    authorized_clients:\n      - key: nJSH9nZN2ugQeksHif7Jtv19RQA58yjxfX-Cpnhx09s\n    ...\n  modules:\n    ...\n    - name: register\n      package: "gorgone::modules::core::register::hooks"\n      enable: true\n      config_file: /etc/centreon-gorgone/nodes-register-override.yml\n    ...\n')),(0,t.kt)("p",null,"Vous venez de cr\xe9er le fichier ",(0,t.kt)("strong",{parentName:"p"},"/etc/centreon-gorgone/nodes-register-override.yml")," :"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-shell"},"nodes:\n  - id: 6\n    type: pull\n    prevail: 1\n")))}m.isMDXComponent=!0}}]);