"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[37706],{475285:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>f,frontMatter:()=>p,metadata:()=>u,toc:()=>m});n(667294);var r=n(603905),a=n(451715),o=n(907626);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const p={id:"ldap",title:"Connecting Centreon to an LDAP directory"},c=void 0,u={unversionedId:"administration/parameters/ldap",id:"version-22.10/administration/parameters/ldap",title:"Connecting Centreon to an LDAP directory",description:"When you connect Centreon to an LDAP directory, users in this directory can log in to Centreon using their LDAP credentials.",source:"@site/versioned_docs/version-22.10/administration/parameters/ldap.md",sourceDirName:"administration/parameters",slug:"/administration/parameters/ldap",permalink:"/centreon-documentation/pr-preview/pr-2606/docs/22.10/administration/parameters/ldap",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/versioned_docs/version-22.10/administration/parameters/ldap.md",tags:[],version:"22.10",lastUpdatedAt:1694692648,formattedLastUpdatedAt:"Sep 14, 2023",frontMatter:{id:"ldap",title:"Connecting Centreon to an LDAP directory"},sidebar:"version-22.10/docs",previous:{title:"Configuring a local authentication",permalink:"/centreon-documentation/pr-preview/pr-2606/docs/22.10/connect/loginpwd"},next:{title:"Configuring a Web SSO connection",permalink:"/centreon-documentation/pr-preview/pr-2606/docs/22.10/connect/sso"}},d={},m=[{value:"Configuration",id:"configuration",level:2}],k={toc:m},h="wrapper";function f(e){var{components:t}=e,p=l(e,["components"]);return(0,r.kt)(h,s(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}({},k,p),{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"When you connect Centreon to an LDAP directory, users in this directory can log in to Centreon using their LDAP credentials."),(0,r.kt)("p",null,"Connecting Centreon to an LDAP directory does not create ",(0,r.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2606/docs/22.10/monitoring/basic-objects/contacts"},"users")," automatically in Centreon. According to your configuration, users from the LDAP directory can be created automatically when they log in to Centreon, or you can import them manually."),(0,r.kt)("p",null,"You can ",(0,r.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2606/docs/22.10/administration/access-control-lists"},"grant rights to these users")," indirectly by adding them to a contact group (which in turn can be included in an ",(0,r.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2606/docs/22.10/administration/access-control-lists#creating-an-access-group"},"access group"),")."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"If you want to use SSO for authentication, please read\n",(0,r.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2606/docs/22.10/connect/sso"},"this procedure"),".")),(0,r.kt)("h2",{id:"configuration"},"Configuration"),(0,r.kt)("p",null,"Go to ",(0,r.kt)("strong",{parentName:"p"},"Administration > Parameters > LDAP")," and click on ",(0,r.kt)("strong",{parentName:"p"},"Add"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:n(254165).Z,width:"1345",height:"1429"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Configuration name")," and ",(0,r.kt)("strong",{parentName:"p"},"Description"),": define the name and the\ndescription of the LDAP server")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Enable LDAP authentication"),": enable authentication via the\nLDAP server")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Store LDAP password"),": can be used to store user passwords in the\ndatabase, useful to authenticate users in the event of loss of connection\nwith the LDAP")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Auto import users"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Yes")," : All users in the directory will be able to log in to Centreon. The first time they log in, they will be created in Centreon, on page ",(0,r.kt)("strong",{parentName:"li"},"Configuration > Contacts > Contacts/Users"),", with their LDAP parameters (name, first name, email address...)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"No")," : Users will only be able to log in to Centreon if their account has been imported manually into Centreon."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Import users manually")," : Whether auto import is enabled or not, you can use this button to import some users to the list of contacts."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"LDAP search size limit"),": can be used to limit the number of users to search for (1000 users maximum).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"LDAP search timeout"),": can be used define the maximum time for the\nLDAP search.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Contact template"),": defines the ",(0,r.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2606/docs/22.10/monitoring/basic-objects/contacts-templates"},"contact template")," that will be linked\nto all users imported from this LDAP directory.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Default contactgroup"),": is used to add a new user to\na default contactgroup. This allows you to ",(0,r.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2606/docs/22.10/administration/access-control-lists"},"grant rights")," indirectly to the LDAP users.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Use service DNS"),": indicates if it is necessary to use the DNS server\nto solve the IP address of the LDAP directory.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Enable LDAP synchronization on login"),": If enabled, a user LDAP\nsynchronization will be performed on login to update contact's data and\ncalculate new Centreon ACLs.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"LDAP synchronization interval (in hours)"),": Displayed only if the previous\noption is enabled. This field is used to specify the time between two LDAP\nsynchronizations."))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"The contact's LDAP data won't be updated in Centreon until the next\nsynchronization is expected."),(0,r.kt)("p",{parentName:"blockquote"},'If needed, "on-demand" synchronization are\navailable from the ',(0,r.kt)("strong",{parentName:"p"},"Administration > Session")," page and from the\n",(0,r.kt)("strong",{parentName:"p"},"Configuration > Users > Contact / Users")," list."),(0,r.kt)("p",{parentName:"blockquote"},"The interval is expressed in hours. By default, this field is set to the lower\nvalue : 1 hour.")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"We save a timestamp as reference date in the DB and use the CentAcl CRON to\nupdate it."),(0,r.kt)("p",{parentName:"blockquote"},"The reference date is used to calculate the next expected LDAP synchronization."),(0,r.kt)("p",{parentName:"blockquote"},"If you modify one of these two fields the reference timestamp will be reset to\nyour current time."),(0,r.kt)("p",{parentName:"blockquote"},"The reference date won't be updated if you modify or not, only the other fields\n/ options.")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"LDAP servers"),": can be used to add one or more LDAP directories to\nwhich Centreon will connect.")),(0,r.kt)("p",null,"The table below summarizes the settings to add an LDAP server:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Column"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Host address"),(0,r.kt)("td",{parentName:"tr",align:null},"Contains the IP address or DNS name of the LDAP server")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Port"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates the connection port to access the LDAP")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"SSL"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates if the SSL protocol is used for the connection to the server")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"TLS"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates if the TLS protocol is used for the connection to the server")))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Bind user")," and ",(0,r.kt)("strong",{parentName:"li"},"Bind password"),": define the user name and the\npassword for logging to the LDAP server"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Protocol version"),": indicates the version of the protocol using to\nlogin"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Template"),": can be used to pre-configure the search filters for users\non the LDAP directory. These filters serve to propose, by default, a search\non the MS Active Directory, Okta or of Posix type directories.")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Before any import, check the default settings proposed. If you have not selected\na Model, you will need to define the search filters manually by filling in the\nfields.")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"You can use ",(0,r.kt)("strong",{parentName:"p"},"Okta")," as LDAP server with ",(0,r.kt)("a",{parentName:"p",href:"https://help.okta.com/en/prod/Content/Topics/Apps/Apps_Configure_Template_App.htm"},"SWA\nplugin"),".\nPlease define:"),(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"uid=<USER",">",",dc=<ORGANIZATION",">",",dc=okta,dc=com")," for ",(0,r.kt)("strong",{parentName:"li"},"Bind DN")," field"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"ou=<OU",">",",dc=<ORGANIZATION",">",",dc=okta,dc=com")," ","*","*"," for ",(0,r.kt)("strong",{parentName:"li"},"Search group\nbase DN")," field."))),(0,r.kt)("p",null,"With CentOS 7, it's possible to not check server certificate, follow procedure:"),(0,r.kt)("p",null,'Add the following line in file "/etc/openldap/ldap.conf":'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"TLS_REQCERT never\n")),(0,r.kt)("p",null,"Then restart Apache:"),(0,r.kt)(a.Z,{groupId:"sync",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"Alma/ RHEL / Oracle Linux 8",label:"Alma/ RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart httpd\n"))),(0,r.kt)(o.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart httpd24-httpd\n")))))}f.isMDXComponent=!0},254165:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/parameters-ldap-add-9e75bf796676a9ae06fa6c879927cf9b.png"}}]);