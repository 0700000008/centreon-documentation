"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[82174],{603905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>g});var n=r(667294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),s=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=s(e.components);return n.createElement(l.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),c=s(r),m=a,g=c["".concat(l,".").concat(m)]||c[m]||d[m]||o;return r?n.createElement(g,i(i({ref:t},u),{},{components:r})):n.createElement(g,i({ref:t},u))}));function g(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=m;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p[c]="string"==typeof e?e:a,i[1]=p;for(var s=2;s<o;s++)i[s]=r[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},776654:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>u,contentTitle:()=>l,default:()=>g,frontMatter:()=>p,metadata:()=>s,toc:()=>c});r(667294);var n=r(603905);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const p={id:"upgrade",title:"Upgrade the extension"},l=void 0,s={unversionedId:"reporting/upgrade",id:"version-22.04/reporting/upgrade",title:"Upgrade the extension",description:"When updating from version = 18.10, you need to",source:"@site/versioned_docs/version-22.04/reporting/upgrade.md",sourceDirName:"reporting",slug:"/reporting/upgrade",permalink:"/centreon-documentation/pr-preview/pr-2584/docs/22.04/reporting/upgrade",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/versioned_docs/version-22.04/reporting/upgrade.md",tags:[],version:"22.04",lastUpdatedAt:1694501365,formattedLastUpdatedAt:"Sep 12, 2023",frontMatter:{id:"upgrade",title:"Upgrade the extension"},sidebar:"version-22.04/docs",previous:{title:"Update the extension",permalink:"/centreon-documentation/pr-preview/pr-2584/docs/22.04/reporting/update"},next:{title:"Migrate the extension",permalink:"/centreon-documentation/pr-preview/pr-2584/docs/22.04/reporting/migrate"}},u={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Update the RPM signing key",id:"update-the-rpm-signing-key",level:3},{value:"Step 1: Update the repository",id:"step-1-update-the-repository",level:2},{value:"Step 2: Upgrade the extension interface",id:"step-2-upgrade-the-extension-interface",level:2},{value:"Step 3: Upgrade the reporting server",id:"step-3-upgrade-the-reporting-server",level:2},{value:"Java version requirement",id:"java-version-requirement",level:3},{value:"Step 4: Upgrade the MariaDB database",id:"step-4-upgrade-the-mariadb-database",level:2}],d={toc:c},m="wrapper";function g(e){var{components:t}=e,r=i(e,["components"]);return(0,n.kt)(m,o(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){a(e,t,r[t])}))}return e}({},d,r),{components:t,mdxType:"MDXLayout"}),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"When updating from version < 18.10 to a version >= 18.10, you need to"),(0,n.kt)("ul",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ul"},"Retrieve a new license from Centreon support"),(0,n.kt)("li",{parentName:"ul"},"Make sure your Centreon MBI server is based on CentOS/RH 7. You may use the\nfollowing procedure to migrate your server: ",(0,n.kt)("a",{parentName:"li",href:"/centreon-documentation/pr-preview/pr-2584/docs/22.04/reporting/migrate"},"Migrate your\nreporting server")))),(0,n.kt)("p",null,"The upgrade of Centreon MBI consists of 4 steps :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Updating the repository"),(0,n.kt)("li",{parentName:"ul"},"Updating the extension interface"),(0,n.kt)("li",{parentName:"ul"},"Updating the reporting server"),(0,n.kt)("li",{parentName:"ul"},"Updating the MariaDB database")),(0,n.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,n.kt)("h3",{id:"update-the-rpm-signing-key"},"Update the RPM signing key"),(0,n.kt)("p",null,"For security reasons, the keys used to sign Centreon RPMs are rotated regularly. The last change occurred on October 14, 2021. When upgrading from an older version, you need to go through the ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2584/docs/22.04/security/key-rotation#existing-installation"},"key rotation procedure"),", to remove the old key and install the new one."),(0,n.kt)("h2",{id:"step-1-update-the-repository"},"Step 1: Update the repository"),(0,n.kt)("p",null,"When you upgrade from a previous major version to 22.04.x, you first need to update the repository on your Central & Reporting servers."),(0,n.kt)("p",null,'You will find the new "Business" repository on the "Repositories" page in your ',(0,n.kt)("a",{parentName:"p",href:"https://support.centreon.com/hc/en-us/categories/10341239833105-Repositories"},"Centreon Support account"),"."),(0,n.kt)("h2",{id:"step-2-upgrade-the-extension-interface"},"Step 2: Upgrade the extension interface"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Update the package, run the following commands:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"yum update centreon-bi-server\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Update through the interface:  Log on to the Centreon web interface and go to\nthe ",(0,n.kt)("em",{parentName:"p"},"Administration > Extension > Manager")," page and click on the\nAirUpdate button to update the extension and the widgets"))),(0,n.kt)("h2",{id:"step-3-upgrade-the-reporting-server"},"Step 3: Upgrade the reporting server"),(0,n.kt)("h3",{id:"java-version-requirement"},"Java version requirement"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Ensure a version of Java 17 (or 18) is installed before you start the procedure.")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"If you need to check the Java version, enter the following command:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"java -version\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"If you need to upgrade the Java installation to Java 17 (or 18), go to the ",(0,n.kt)("a",{parentName:"p",href:"https://www.oracle.com/java/technologies/downloads/#java17"},"Oracle official download")," page.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"If several Java versions are installed, you need to activate the right version. Display the installed versions using the following command and select the Java 17 (or 18) version:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo update-alternatives --config java\n")))),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Connect to your reporting server and stop the scheduler service (CBIS):"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl stop cbis\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Then run the following commands: "),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"yum clean all\nyum update centreon-bi\\*\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Start the scheduler service: "),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl start cbis\n")))),(0,n.kt)("h2",{id:"step-4-upgrade-the-mariadb-database"},"Step 4: Upgrade the MariaDB database"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Stop the ",(0,n.kt)("strong",{parentName:"p"},"cbis")," service:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl stop cbis\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"See ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2584/docs/22.04/upgrade/upgrade-mariadb"},"Upgrading MariaDB"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Start the ",(0,n.kt)("strong",{parentName:"p"},"cbis")," service:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl start cbis\n")))))}g.isMDXComponent=!0}}]);