"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[4634],{40331:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/files/Centreon-MBI-QuickGuide-Storage-Sizing_EN-45d0eeb05362efed69cc1cad7e374c7b.xlsx"},647199:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/files/centreon-55f8e9461ad0d121a6603b4417c2ea49.cnf"},639399:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/files/view_creation-eb5f170ad3d8a0853fe926d3a034f8a2.sql"},142462:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>p,metadata:()=>u,toc:()=>m});n(667294);var a=n(603905),r=n(451715),l=n(907626);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const p={id:"installation",title:"Install Centreon MBI extension"},d=void 0,u={unversionedId:"reporting/installation",id:"version-21.10/reporting/installation",title:"Install Centreon MBI extension",description:"Centreon MBI is a Centreon extension that requires a valid license key. To",source:"@site/versioned_docs/version-21.10/reporting/installation.md",sourceDirName:"reporting",slug:"/reporting/installation",permalink:"/centreon-documentation/pr-preview/pr-2580/docs/21.10/reporting/installation",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/versioned_docs/version-21.10/reporting/installation.md",tags:[],version:"21.10",lastUpdatedAt:1693517931,formattedLastUpdatedAt:"Aug 31, 2023",frontMatter:{id:"installation",title:"Install Centreon MBI extension"},sidebar:"version-21.10/docs",previous:{title:"Report development",permalink:"/centreon-documentation/pr-preview/pr-2580/docs/21.10/reporting/report-development"},next:{title:"Update the extension",permalink:"/centreon-documentation/pr-preview/pr-2580/docs/21.10/reporting/update"}},c={},m=[{value:"Architecture",id:"architecture",level:2},{value:"Dedicated reporting server",id:"dedicated-reporting-server",level:3},{value:"Network flow table",id:"network-flow-table",level:3},{value:"Packages information",id:"packages-information",level:3},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Centreon central server",id:"centreon-central-server",level:3},{value:"Reporting dedicated server",id:"reporting-dedicated-server",level:3},{value:"Install the extension on Centreon",id:"install-the-extension-on-centreon",level:2},{value:"Activate the extension",id:"activate-the-extension",level:3},{value:"Configure the general options",id:"configure-the-general-options",level:3},{value:"Centreon central databases access",id:"centreon-central-databases-access",level:3},{value:"Case #1: MariaDB monitoring database is hosted on the Central monitoring server",id:"case-1-mariadb-monitoring-database-is-hosted-on-the-central-monitoring-server",level:4},{value:"Case #2: MariaDB monitoring database is hosted on a dedicated server",id:"case-2-mariadb-monitoring-database-is-hosted-on-a-dedicated-server",level:4},{value:"Grant rights to user cbis",id:"grant-rights-to-user-cbis",level:3},{value:"Install the dedicated reporting server",id:"install-the-dedicated-reporting-server",level:2},{value:"Install the packages",id:"install-the-packages",level:3},{value:"Procedure",id:"procedure",level:4},{value:"Reporting server configuration",id:"reporting-server-configuration",level:3},{value:"MariaDB optimization",id:"mariadb-optimization",level:4},{value:"Start configuring",id:"start-configuring",level:3},{value:"ETL: Configuration",id:"etl-configuration",level:3},{value:"ETL: Data retention",id:"etl-data-retention",level:3},{value:"ETL: Execution",id:"etl-execution",level:3},{value:"Rebuilding statistics using historical data",id:"rebuilding-statistics-using-historical-data",level:4},{value:"Activating daily execution (of the script)",id:"activating-daily-execution-of-the-script",level:4}],g={toc:m},k="wrapper";function h(e){var{components:t}=e,p=s(e,["components"]);return(0,a.kt)(k,o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){i(e,t,n[t])}))}return e}({},g,p),{components:t,mdxType:"MDXLayout"}),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Centreon MBI is a Centreon ",(0,a.kt)("strong",{parentName:"p"},"extension")," that requires a valid license key. To\npurchase one and retrieve the necessary repositories, contact\n",(0,a.kt)("a",{parentName:"p",href:"mailto:sales@centreon.com"},"Centreon"),".")),(0,a.kt)("p",null,"Four major steps to installing Centreon MBI:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Check the system prerequisites."),(0,a.kt)("li",{parentName:"ul"},"Install the Centreon MBI interface in the Centreon application (Centreon MBI Server)."),(0,a.kt)("li",{parentName:"ul"},"Install the reporting server (Centreon MBI Reporting Server)."),(0,a.kt)("li",{parentName:"ul"},"Configure Extract, Transform, Load (ETL) in the Centreon MBI.")),(0,a.kt)("h2",{id:"architecture"},"Architecture"),(0,a.kt)("p",null,"This chapter describes the Centreon MBI architecture and provides an\noverview of how the extension is integrated into Centreon monitoring\nsoftware."),(0,a.kt)("p",null,"The information is addressed to administrators who will be installing or\nconfiguring Centreon MBI."),(0,a.kt)("h3",{id:"dedicated-reporting-server"},"Dedicated reporting server"),(0,a.kt)("p",null,"This architecture and prerequisites apply to:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Test environnements"),(0,a.kt)("li",{parentName:"ul"},"Pre-production environments"),(0,a.kt)("li",{parentName:"ul"},"Production environments.")),(0,a.kt)("p",null,"The diagram below shows the main components of Centreon MBI:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image",src:n(948819).Z,width:"580",height:"363"})),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"The monitoring database can be installed on a server other than the Centreon server.")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"ETL"),": Process that extracts, transforms and loads data into the\nreporting database."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"CBIS"),": Scheduler that manages job execution and publication."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Reporting database"),": MariaDB database that contains reporting data\nand some raw data extracted from the monitoring database.")),(0,a.kt)("h3",{id:"network-flow-table"},"Network flow table"),(0,a.kt)("p",null,"The table below presents the different types of flow, by default,\nbetween the dedicated BI server, Centreon server and databases:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"th"},"Application")),(0,a.kt)("th",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"th"},"Source")),(0,a.kt)("th",{parentName:"tr",align:null},"Destination"),(0,a.kt)("th",{parentName:"tr",align:null},"Port"),(0,a.kt)("th",{parentName:"tr",align:null},"Protocol"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"ETL/CBIS"),(0,a.kt)("td",{parentName:"tr",align:null},"Reporting server"),(0,a.kt)("td",{parentName:"tr",align:null},"Centreon Database"),(0,a.kt)("td",{parentName:"tr",align:null},"3306"),(0,a.kt)("td",{parentName:"tr",align:null},"TCP")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"SSH"),(0,a.kt)("td",{parentName:"tr",align:null},"Reporting server"),(0,a.kt)("td",{parentName:"tr",align:null},"Centreon"),(0,a.kt)("td",{parentName:"tr",align:null},"22"),(0,a.kt)("td",{parentName:"tr",align:null},"TCP")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"CBIS"),(0,a.kt)("td",{parentName:"tr",align:null},"Centreon"),(0,a.kt)("td",{parentName:"tr",align:null},"Reporting server"),(0,a.kt)("td",{parentName:"tr",align:null},"1234"),(0,a.kt)("td",{parentName:"tr",align:null},"TCP")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"CBIS"),(0,a.kt)("td",{parentName:"tr",align:null},"Reporting server"),(0,a.kt)("td",{parentName:"tr",align:null},"Centreon"),(0,a.kt)("td",{parentName:"tr",align:null},"80"),(0,a.kt)("td",{parentName:"tr",align:null},"HTTP","*")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Widgets"),(0,a.kt)("td",{parentName:"tr",align:null},"Centreon"),(0,a.kt)("td",{parentName:"tr",align:null},"Reporting server"),(0,a.kt)("td",{parentName:"tr",align:null},"3306"),(0,a.kt)("td",{parentName:"tr",align:null},"TCP")))),(0,a.kt)("p",null,"*",(0,a.kt)("em",{parentName:"p"},"Only required for Host-Graph-v2 and Hostgroup-Graph-v2 reports that use Centreon API to generate graphs")),(0,a.kt)("h3",{id:"packages-information"},"Packages information"),(0,a.kt)("p",null,"Centreon MBI installation requires two RPM packages:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Centreon-bi-server: Installs the Centreon MBI interface integrated into the\nCentreon front end and must reside on the Centreon Web Server."),(0,a.kt)("li",{parentName:"ul"},"Centreon-bi-reporting-server: Contains all the components needed to run the\nreporting server -- report scheduler, ETL, standards reports -- and must\nreside on a dedicated server for reporting processes.")),(0,a.kt)("p",null,"You should install the MariaDB database at the same time. We highly recommend\ninstalling the database on the same server for performance & isolation\nconsiderations."),(0,a.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("h3",{id:"centreon-central-server"},"Centreon central server"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Software")),(0,a.kt)("p",null,"See the ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2580/docs/21.10/installation/prerequisites#software"},"software requirements"),"."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Centreon 21.10"),(0,a.kt)("li",{parentName:"ul"},"Check that the parameter ",(0,a.kt)("inlineCode",{parentName:"li"},"date.timezone")," is correctly configured in ",(0,a.kt)("inlineCode",{parentName:"li"},"/etc/php.d/php.ini"),"\n(same timezone displayed with the command ",(0,a.kt)("inlineCode",{parentName:"li"},"timedatectl status"),")"),(0,a.kt)("li",{parentName:"ul"},"Avoid the usage of the following variables in your monitoring MariaDB configuration.\nThey halt long queries execution and can stop the ETL or the report generation jobs:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"wait_timeout"),(0,a.kt)("li",{parentName:"ul"},"interactive_timeout")))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Users and groups")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"User"),(0,a.kt)("th",{parentName:"tr",align:null},"Group"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"centreonBI (new)"),(0,a.kt)("td",{parentName:"tr",align:null},"apache, centreon, centreonBI")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"apache (existing)"),(0,a.kt)("td",{parentName:"tr",align:null},"centreonBI")))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Description of users, umask and home directory")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"User"),(0,a.kt)("th",{parentName:"tr",align:null},"umask"),(0,a.kt)("th",{parentName:"tr",align:null},"home"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"centreonBI"),(0,a.kt)("td",{parentName:"tr",align:null},"0002"),(0,a.kt)("td",{parentName:"tr",align:null},"/home/centreonBI")))),(0,a.kt)("h3",{id:"reporting-dedicated-server"},"Reporting dedicated server"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Hardware")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Monitored services"),(0,a.kt)("th",{parentName:"tr",align:null},"CPU"),(0,a.kt)("th",{parentName:"tr",align:null},"RAM"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"< 4 000"),(0,a.kt)("td",{parentName:"tr",align:null},"2 CPU ( 3Ghz ) minimum"),(0,a.kt)("td",{parentName:"tr",align:null},"12GB minimum")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"< 20 000"),(0,a.kt)("td",{parentName:"tr",align:null},"4 CPU (3GHz) minimum"),(0,a.kt)("td",{parentName:"tr",align:null},"16GB minimum")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},">= 20 000 and < 40 000"),(0,a.kt)("td",{parentName:"tr",align:null},"4 CPU (3GHz) minimum"),(0,a.kt)("td",{parentName:"tr",align:null},"24GB minimum")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"> 40 000 and < 100 000"),(0,a.kt)("td",{parentName:"tr",align:null},"8 CPU (3GHz) minimum"),(0,a.kt)("td",{parentName:"tr",align:null},"32GB minimum")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"> 100 000"),(0,a.kt)("td",{parentName:"tr",align:null},"> Contact Centreon"),(0,a.kt)("td",{parentName:"tr",align:null})))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Storage space"),": Use the following ",(0,a.kt)("a",{target:"_blank",href:n(40331).Z},"storage estimation file")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"File system")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"File system"),(0,a.kt)("th",{parentName:"tr",align:null},"Size"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"/"),(0,a.kt)("td",{parentName:"tr",align:null},"5GB minimum")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"/var (containing MariaDB data)"),(0,a.kt)("td",{parentName:"tr",align:null},"Use the result of the above disk-space simulation file MariaDB data)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"MariaDB temp folder"),(0,a.kt)("td",{parentName:"tr",align:null},"We recommend keeping it in /var")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Volume group","*"),(0,a.kt)("td",{parentName:"tr",align:null},"5GB minimum of free space on the ",(0,a.kt)("strong",{parentName:"td"},"Volume group")," hosting the MariaDB DBMS ",(0,a.kt)("strong",{parentName:"td"},"data"))))),(0,a.kt)("p",null,"To check the free space use the command below, replacing vg","_","data by the\nVolume group name:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"vgdisplay vg_data | grep -i free\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Software")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"OS: CentOS / Redhat 7 or 8"),(0,a.kt)("li",{parentName:"ul"},"SGBD: MariaDB 10.5"),(0,a.kt)("li",{parentName:"ul"},"Firewall: Disabled"),(0,a.kt)("li",{parentName:"ul"},"SELinux: Disabled")),(0,a.kt)("p",null,"We advise to tune your MariaDB database server on your reporting server in\norder to have better performance. You will need at least 12GB on your\nreporting server to run the configuration file provided below. Add the\n",(0,a.kt)("a",{target:"_blank",href:n(647199).Z},"following file")," on your\nreporting server in /etc/my.cnf.d/."),(0,a.kt)("p",null,"Make sure to have a ",(0,a.kt)("em",{parentName:"p"},"tmp")," folder in ",(0,a.kt)("em",{parentName:"p"},"/var/lib/mysql"),"."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Do not set these MariaDB optimizations on your monitoring server.")),(0,a.kt)("p",null,"Users and groups:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"User"),(0,a.kt)("th",{parentName:"tr",align:null},"Group"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"centreonBI"),(0,a.kt)("td",{parentName:"tr",align:null},"centreonBI")))),(0,a.kt)("p",null,"Description of users, umask and home directory:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"User"),(0,a.kt)("th",{parentName:"tr",align:null},"umask"),(0,a.kt)("th",{parentName:"tr",align:null},"home"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"centreonBI"),(0,a.kt)("td",{parentName:"tr",align:null},"0002"),(0,a.kt)("td",{parentName:"tr",align:null},"/home/centreonBI")))),(0,a.kt)("h2",{id:"install-the-extension-on-centreon"},"Install the extension on Centreon"),(0,a.kt)("p",null,"The tasks explained in this chapter must be performed on the Centreon\ncentral server."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Install the Centreon Business repository, you can find it on the\n",(0,a.kt)("a",{parentName:"p",href:"https://support.centreon.com/hc/en-us/categories/10341239833105-Repositories"},"support portal"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Then run the following command:"))),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"RHEL / CentOS / Oracle Linux 8",label:"RHEL / CentOS / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-bi-server\n"))),(0,a.kt)(l.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"yum install centreon-bi-server\n")))),(0,a.kt)("h3",{id:"activate-the-extension"},"Activate the extension"),(0,a.kt)("p",null,"The menu ",(0,a.kt)("inlineCode",{parentName:"p"},"Administration > Extension > Manager")," of Centreon enables you to\ninstall the different extension detected by Centreon. Click on the ",(0,a.kt)("strong",{parentName:"p"},"Centreon MBI")," card to install it."),(0,a.kt)("p",null,"Upload the license sent by the Centreon team to be able to start configuring the General Options."),(0,a.kt)("h3",{id:"configure-the-general-options"},"Configure the general options"),(0,a.kt)("p",null,"Set the following parameters in the General Options menu ",(0,a.kt)("inlineCode",{parentName:"p"},"Reporting >\nMonitoring Business Intelligence > General Options"),":"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Tab"),(0,a.kt)("th",{parentName:"tr",align:null},"Option"),(0,a.kt)("th",{parentName:"tr",align:null},"Value"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Scheduler  Options"),(0,a.kt)("td",{parentName:"tr",align:null},"CBIS Host"),(0,a.kt)("td",{parentName:"tr",align:null},"Reporting server IP Address")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"ETL Options"),(0,a.kt)("td",{parentName:"tr",align:null},"Reporting engine uses a dedicated MariaDB server"),(0,a.kt)("td",{parentName:"tr",align:null},"Yes")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Reporting Widgets ","*"),(0,a.kt)("td",{parentName:"tr",align:null},"Reporting MariaDB database"),(0,a.kt)("td",{parentName:"tr",align:null},"Reporting database IP Address (default = same as CBIS Host)")))),(0,a.kt)("p",null,"*"," ",(0,a.kt)("em",{parentName:"p"},"The connection test will not yet work at this stage of the\ninstallation process.")),(0,a.kt)("h3",{id:"centreon-central-databases-access"},"Centreon central databases access"),(0,a.kt)("h4",{id:"case-1-mariadb-monitoring-database-is-hosted-on-the-central-monitoring-server"},"Case #1: MariaDB monitoring database is hosted on the Central monitoring server"),(0,a.kt)("p",null,"Launch the command below to authorize the reporting server to connect to\nthe monitoring server databases. Use the following option:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"@ROOTPWD@"),': Root MariaDB password of the monitoring databases\nserver.If there is no password for "root" user, don\'t specify the\noption ',(0,a.kt)("strong",{parentName:"p"},"root-password"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"/usr/share/centreon/www/modules/centreon-bi-server/tools/centreonMysqlRights.pl --root-password=@ROOTPWD@\n")),(0,a.kt)("h4",{id:"case-2-mariadb-monitoring-database-is-hosted-on-a-dedicated-server"},"Case #2: MariaDB monitoring database is hosted on a dedicated server"),(0,a.kt)("p",null,"Connect by SSH to the database server, and the run the following commands:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-SQL"},"CREATE USER 'centreonbi'@'$BI_ENGINE_IP$' IDENTIFIED BY 'centreonbi';\nGRANT ALL PRIVILEGES ON centreon.* TO 'centreonbi'@'$BI_ENGINE_IP$';\nGRANT ALL PRIVILEGES ON centreon_storage.* TO 'centreonbi'@'$BI_ENGINE_IP$';\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"$BI_ENGINE_IP$"),": IP address of the reporting server."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"If you're using MariaDB replication for your ",(0,a.kt)("strong",{parentName:"p"},"monitoring databases"),",\ncertain views are created during installation of Centreon MBI. You need\nto exclude them from replication by adding the following line in the\nmy.cnf file of the slave server."),(0,a.kt)("pre",{parentName:"blockquote"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"replicate-wild-ignore-table=centreon.mod_bi_%v01,centreon.mod_bi_%V01\n")),(0,a.kt)("p",{parentName:"blockquote"},"Then, create the views manually on the slave server by launching the\nfollowing command line:"),(0,a.kt)("p",{parentName:"blockquote"},"#mysql centreon < ",(0,a.kt)("a",{target:"_blank",href:n(639399).Z},"view_creation.sql"))),(0,a.kt)("p",null,"Please go to the next chapter to continue the installation."),(0,a.kt)("h3",{id:"grant-rights-to-user-cbis"},"Grant rights to user cbis"),(0,a.kt)("p",null,"When you install Centreon MBI, a ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2580/docs/21.10/monitoring/basic-objects/contacts"},"user")," called ",(0,a.kt)("strong",{parentName:"p"},"cbis")," is automatically created. It allows the report generation engine to extract data from Centreon (using the APIs) in order to put them into the report. This user must ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2580/docs/21.10/administration/access-control-lists"},"have access to all resources monitored by Centreon")," to be able to extract performance graphs for the following reports:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Host-Graph-v2 ")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Hostgroup-Graph-v2."))),(0,a.kt)("p",null,"To test the MBI reporting server's connection to the Centreon API, use the following command to download a graph. Replace the parameters of the graph and the timestamps by the ones you want, and replace XXXXXXXXX by the autologin token for user ",(0,a.kt)("strong",{parentName:"p"},"cbis"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"curl -XGET 'https://IP_CENTRAL/centreon/include/views/graphs/generateGraphs/generateImage.php?akey=XXXXXXXXX&username=CBIS&hostname=<host_name>&service=<service_description>&start=<start_date>&end=<end_date>' --output /tmp/image.png\n")),(0,a.kt)("p",null,"Example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"curl -XGET 'https://10.1.1.1/centreon/include/views/graphs/generateGraphs/generateImage.php?akey=otmw3n1hu03bvt9e0caphuf50ph8sdthcsk8ofdk&username=CBIS&hostname=my-poller&service=Cpu&start=1623016800&end=1623621600' --output /tmp/image.png\n")),(0,a.kt)("p",null,"The output should look like this, and ",(0,a.kt)("inlineCode",{parentName:"p"},"/tmp/image.png")," should be an image of the graph you wanted:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100 18311  100 18311    0     0  30569      0 --:--:-- --:--:-- --:--:-- 30569\n")),(0,a.kt)("h2",{id:"install-the-dedicated-reporting-server"},"Install the dedicated reporting server"),(0,a.kt)("h3",{id:"install-the-packages"},"Install the packages"),(0,a.kt)("p",null,"You need the following information available before proceeding with the\ninstallation process:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"IP/DNS of the monitoring database"),(0,a.kt)("li",{parentName:"ul"},"IP/DNS of the Centreon web interface"),(0,a.kt)("li",{parentName:"ul"},"IP/DNS of the reporting database (localhost highly recommended)"),(0,a.kt)("li",{parentName:"ul"},"Access (user/password) to the reporting database"),(0,a.kt)("li",{parentName:"ul"},"Knowledge of the SSH password (after defining it) for the Centreon\nBI user on the central monitoring server (to publish reports on the\ninterface).")),(0,a.kt)("h4",{id:"procedure"},"Procedure"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"To start installing the reporting server, install the Business repository, you can find it on the\n",(0,a.kt)("a",{parentName:"p",href:"https://support.centreon.com/hc/en-us/categories/10341239833105-Repositories"},"support portal"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Then execute the following command:"))),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"RHEL / CentOS / Oracle Linux 8",label:"RHEL / CentOS / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-bi-reporting-server MariaDB-server MariaDB-client\n")),(0,a.kt)("p",null,"If you installed your reporting server using a fresh distribution you\nneed to add the following GPG key:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"cd /etc/pki/rpm-gpg/\nwget https://yum.centreon.com/standard/21.10/el8/stable/RPM-GPG-KEY-CES\n"))),(0,a.kt)(l.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"yum install centreon-bi-reporting-server MariaDB-server MariaDB-client\n")),(0,a.kt)("p",null,"If you installed your reporting server using a fresh distribution you\nneed to add the following GPG key:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"cd /etc/pki/rpm-gpg/\nwget https://yum.centreon.com/standard/21.10/el7/stable/RPM-GPG-KEY-CES\n")))),(0,a.kt)("p",null,"Enable the cbis service:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl enable cbis\n")),(0,a.kt)("h3",{id:"reporting-server-configuration"},"Reporting server configuration"),(0,a.kt)("h4",{id:"mariadb-optimization"},"MariaDB optimization"),(0,a.kt)("p",null,"Make sure you have installed the MariaDB configuration file provided in\nthe pre-requisites before starting the MariaDB service ",(0,a.kt)("a",{target:"_blank",href:n(647199).Z},"following file")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart mariadb\n")),(0,a.kt)("p",null,"For installation, it is necessary to modify ",(0,a.kt)("strong",{parentName:"p"},"LimitNOFILE")," limitation.\nSetting this option in /etc/my.cnf will NOT work."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'mkdir -p  /etc/systemd/system/mariadb.service.d/\necho -ne "[Service]\\nLimitNOFILE=32000\\n" | tee /etc/systemd/system/mariadb.service.d/limits.conf\nsystemctl daemon-reload\nsystemctl restart mariadb\n')),(0,a.kt)("p",null,"Then start the service MariaDB. If this service cannot start, remove the\nib_log files before restarting MariaDB (be sure MariaDB is stopped):"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"rm -f /var/lib/mysql/ib_logfile*\nsystemctl start mariadb\n")),(0,a.kt)("p",null,"If you are using a custom MariaDB socket file, modify the ",(0,a.kt)("inlineCode",{parentName:"p"},"/etc/my.cnf")," file\nand in the ","[client]"," section, add the following variable:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"socket=$PATH_TO_SOCKET$\n")),(0,a.kt)("h3",{id:"start-configuring"},"Start configuring"),(0,a.kt)("p",null,"First check that the reporting MariaDB is running. Then launch the\nfollowing command, answering the questions:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"/usr/share/centreon-bi/config/install.sh\n")),(0,a.kt)("p",null,"The script handles the SSH exchange key between the monitoring and\nreporting servers and configures the default SFTP publication rule in\norder to publish reports on the Centreon web interface. Finally, it\nactivates the backup and starts the CBIS service."),(0,a.kt)("p",null,"Once installation is complete, go to the next chapter to configure the ETL."),(0,a.kt)("h3",{id:"etl-configuration"},"ETL: Configuration"),(0,a.kt)("p",null,"Centreon MBI integrates its own extract, transform, load (ETL)\ncapabilities to:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Synchronize raw monitoring data with the reporting server."),(0,a.kt)("li",{parentName:"ul"},"Calculate availability and performance statistics on the reporting\nserver."),(0,a.kt)("li",{parentName:"ul"},"Manage data retention on the reporting server.")),(0,a.kt)("p",null,"Before following the next steps, you should have read\n",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2580/docs/21.10/reporting/installation#best-practices-for-monitoring"},"the best practice parts")," to\nensure that the Centreon objects (e.g., groups and categories) are configured\naccording to Centreon MBI requirements."),(0,a.kt)("p",null,"In the ",(0,a.kt)("em",{parentName:"p"},"Reporting > Business Intelligence > General Options > ETL options")," menu\nof the Centreon server, specify the following options:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"th"},"Options")),(0,a.kt)("th",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"th"},"Values")))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"td"},"General options")),(0,a.kt)("td",{parentName:"tr",align:null})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Reporting engine uses a dedicated dedicated MariaDB server"),(0,a.kt)("td",{parentName:"tr",align:null},"Yes. You ",(0,a.kt)("strong",{parentName:"td"},"must")," use a reporting server")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Compatibility mode to use report templates from version of Centreon MBI prior to 1.5.0"),(0,a.kt)("td",{parentName:"tr",align:null},"No (deprecated)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Temporary file storage directory on reporting server"),(0,a.kt)("td",{parentName:"tr",align:null},"Folder where dumps will be stored on the reporting server")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Type of statistics to build"),(0,a.kt)("td",{parentName:"tr",align:null},"Select \u201cAvailability only\u201d if you only use availability reports. Select \u201cPerformance and capacity only\u201d if you only want to use capacity and performance reports. Select \u201cAll\u201d to calculate the statistics for both types of reports.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Use large memory tweaks (store MariaDB temporary tables in memory)"),(0,a.kt)("td",{parentName:"tr",align:null},"Activated only if your MariaDB configuration and allocated physical memory on the server permit.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"td"},"Reporting perimeter selection")),(0,a.kt)("td",{parentName:"tr",align:null})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Hostgroups"),(0,a.kt)("td",{parentName:"tr",align:null},"Select only host groups for which you want to aggregate data.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Hostcategories"),(0,a.kt)("td",{parentName:"tr",align:null},"Select only host categories for which you want to aggregate data.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Service categories"),(0,a.kt)("td",{parentName:"tr",align:null},"Select only service categories for which you want to aggregate data.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"td"},"Availability statistic calculation")),(0,a.kt)("td",{parentName:"tr",align:null})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Live services for availability statistics calculation"),(0,a.kt)("td",{parentName:"tr",align:null},"Select required time periods.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"td"},"Performance and capacity statistic calculation")),(0,a.kt)("td",{parentName:"tr",align:null})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Granularity required for performance data statistics"),(0,a.kt)("td",{parentName:"tr",align:null},"Select level of granularity required to run the desired performance reports (1).")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Live services for performance data statistics calculation"),(0,a.kt)("td",{parentName:"tr",align:null},"Select required time periods.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"td"},"Capacity statistic aggregated by month")),(0,a.kt)("td",{parentName:"tr",align:null})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Live services for capacity statistics calculation"),(0,a.kt)("td",{parentName:"tr",align:null},"Select the \u201c24x7\u201d time period.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Service categories related to capacity data monitoring"),(0,a.kt)("td",{parentName:"tr",align:null},"Select the service categories that have been associated with capacity-type services.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Exclude metrics from service categories that do not return capacity USAGE information"),(0,a.kt)("td",{parentName:"tr",align:null},"Concerns the metrics linked to services which return capacity data. Select the metrics that do not return capacity usage information. but a maximum or total value. (e.g., the metric \u201csize\u201d).")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"td"},"Centile parameters")),(0,a.kt)("td",{parentName:"tr",align:null})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Calculating centile aggregation by"),(0,a.kt)("td",{parentName:"tr",align:null},"Select the desired aggregation level. The standard percentile report provided with BI 2.1 uses Month data.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Select service categories to aggregate centile on"),(0,a.kt)("td",{parentName:"tr",align:null},"Filter on relevant service categories for centile statistics (e.g., Traffic).")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"First day of the week"),(0,a.kt)("td",{parentName:"tr",align:null},"Select the first day of the week for Week aggregation.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Centile / Timeperiod combination"),(0,a.kt)("td",{parentName:"tr",align:null},"Create a new centile/timeperiod combination on which to perform the calculation.")))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"(1)")," Reports requiring a precise value per hour of performance data\nare listed below. If you do not use the following reports, disable the\nstatistics calculation per hour:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Hostgroup-Host-details-1"),(0,a.kt)("li",{parentName:"ul"},"Host-detail-v2"),(0,a.kt)("li",{parentName:"ul"},"Hostgroup-traffic-Average-Usage-By-Interface"),(0,a.kt)("li",{parentName:"ul"},"Hostgroup-traffic-by-Interface-And-Bandwith-Ranges.")),(0,a.kt)("h3",{id:"etl-data-retention"},"ETL: Data retention"),(0,a.kt)("p",null,'The reporting server contains statistics tables specific to Centreon MBI\nin the database "centreon_storage". The storage space used by these\ntables increases every day. It is possible to control the size of these\ntables by setting data retention rules.'),(0,a.kt)("p",null,"Under ",(0,a.kt)("em",{parentName:"p"},"Reporting > Monitoring Business Intelligence > General options > Data retention"),",\ndata retention can be managed by:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Type of data (availability, performance)."),(0,a.kt)("li",{parentName:"ul"},"Precision of data (raw data, hourly, daily or monthly values).")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Before enabling the data retention options, check that the ",(0,a.kt)("strong",{parentName:"p"},"Reporting\nengine uses a dedicated MariaDB server"),' option is correctly set to\n"Yes" in the ',(0,a.kt)("em",{parentName:"p"},"Reporting > Business Intelligence > General options ETL options")," menu.")),(0,a.kt)("p",null,'Enable data retention management by selecting "Yes", then set the\noptions in the configuration (example below).'),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image",src:n(730982).Z,width:"1392",height:"552"})),(0,a.kt)("p",null,"To activate automatic purge of old data, edit the cron file\n",(0,a.kt)("inlineCode",{parentName:"p"},"/etc/cron.d/centreon-bi-purge")," on the reporting server, then uncomment the following line:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"#0 20 * * * root @CENTREON_BI_HOME@/*etl*/dataRetentionManager.pl >> @CENTREON_BI_LOG@/dataRetentionManager.log 2>&1\n")),(0,a.kt)("p",null,"Avoid periods scheduled for statistical calculations with Centreon MBI\nETL and report generations."),(0,a.kt)("p",null,"You can run this cron daily or weekly, depending on the execution time of the batch and the load generated on the server."),(0,a.kt)("p",null,"Then restart the service cron:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart crond\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"BEST PRACTICE"),": Select different retention periods according to the\ngranularity of the statistical data:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Hourly aggregated values are used to analyze a metric over a short period, they take a\nlot of space on the disk. You may not need to keep these statistics more that two or three months."),(0,a.kt)("li",{parentName:"ul"},"Beyond five or six months, you may only need to view the trend for\navailability or performance statistics. You could then keep the\ndaily aggregated data for a maximum of six months, for example, and\nconfigure the retention of monthly aggregated data for a period of\nseveral dozen months.")),(0,a.kt)("p",null,"Please go to the next chapter to continue the installation."),(0,a.kt)("h3",{id:"etl-execution"},"ETL: Execution"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Before continuing, be sure that you have installed the MariaDB\nconfiguration file as specified above in the prerequisites. Configure\nand activate data retention so that only the required data is imported\nand calculated.")),(0,a.kt)("h4",{id:"rebuilding-statistics-using-historical-data"},"Rebuilding statistics using historical data"),(0,a.kt)("p",null,"Run the following command on the ",(0,a.kt)("em",{parentName:"p"},"REPORTING")," server, it will:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Delete all existing data from the reporting server."),(0,a.kt)("li",{parentName:"ul"},"Import raw monitoring data from the monitoring server to the\nreporting server (based on retention parameters)."),(0,a.kt)("li",{parentName:"ul"},"Populate the tables containing the availability statistics for hosts\nand services."),(0,a.kt)("li",{parentName:"ul"},"Populate the tables containing the performance and capacity\nstatistics.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"/usr/share/centreon-bi/bin/centreonBIETL -r\n")),(0,a.kt)("h4",{id:"activating-daily-execution-of-the-script"},"Activating daily execution (of the script)"),(0,a.kt)("p",null,"Once the rebuild process is finished, you can activate the daily\nstatistic calculation. On the reporting server, edit the file\n",(0,a.kt)("em",{parentName:"p"},"/etc/cron.d/centreon-bi-engine")," and uncomment the following line:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"#30 4 * * * root /usr/share/centreon-bi/bin/centreonBIETL -d >> /var/log/centreon-bi/centreonBIETL.log 2>&1\n")),(0,a.kt)("p",null,"Restart the service cron:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart crond\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Make sure that the batch ",(0,a.kt)("em",{parentName:"p"},"centreonBIETL")," starts only once the batch\n",(0,a.kt)("em",{parentName:"p"},"eventReportBuilder")," has finished on the monitoring server (see the cron\nfile ","*"," /etc/cron.d/centreon","*"," on the monitoring server).")),(0,a.kt)("p",null,"Centreon MBI installation is now complete, check ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2580/docs/21.10/getting-started/analyze-resources-availability"},"the tutorial")))}h.isMDXComponent=!0},948819:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/architecture-57c0d086ac05ff41f37ef131fb04d7de.png"},730982:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/bi_retention-543fb795088d6933e31f289b1555061f.png"}}]);