"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[22876],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>v});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),c=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},s="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),s=c(r),m=a,v=s["".concat(l,".").concat(m)]||s[m]||d[m]||o;return r?n.createElement(v,i(i({ref:t},u),{},{components:r})):n.createElement(v,i({ref:t},u))}));function v(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=m;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p[s]="string"==typeof e?e:a,i[1]=p;for(var c=2;c<o;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},23400:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>u,contentTitle:()=>l,default:()=>v,frontMatter:()=>p,metadata:()=>c,toc:()=>s});r(67294);var n=r(3905);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const p={id:"map-api",title:"MAP API"},l=void 0,c={unversionedId:"api/map-api",id:"version-23.10/api/map-api",title:"MAP API",description:"Si vous souhaitez automatiser la cr\xe9ation ou la maintenance de cartes standard, vous pouvez utiliser l'API de Centreon MAP.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-23.10/api/graph-views-map-api.md",sourceDirName:"api",slug:"/api/map-api",permalink:"/centreon-documentation/pr-preview/next/pr-2759/fr/docs/api/map-api",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/i18n/fr/docusaurus-plugin-content-docs/version-23.10/api/graph-views-map-api.md",tags:[],version:"23.10",lastUpdatedAt:1698319417,formattedLastUpdatedAt:"26 oct. 2023",frontMatter:{id:"map-api",title:"MAP API"},sidebar:"version-23.10/docs",previous:{title:"D\xe9pannage de MAP",permalink:"/centreon-documentation/pr-preview/next/pr-2759/fr/docs/graph-views/map-web-troubleshooting"},next:{title:"Introduction \xe0 Centreon MAP (Legacy)",permalink:"/centreon-documentation/pr-preview/next/pr-2759/fr/docs/graph-views/introduction"}},u={},s=[{value:"Permissions",id:"permissions",level:2},{value:"Comment utiliser l&#39;API de Centreon MAP",id:"comment-utiliser-lapi-de-centreon-map",level:2},{value:"S&#39;authentifier",id:"sauthentifier",level:3},{value:"Cr\xe9er une carte",id:"cr\xe9er-une-carte",level:3},{value:"Ouvrir la carte",id:"ouvrir-la-carte",level:3},{value:"Cr\xe9er et attacher un \xe9l\xe9ment &quot;shape&quot; \xe0 la carte ouverte",id:"cr\xe9er-et-attacher-un-\xe9l\xe9ment-shape-\xe0-la-carte-ouverte",level:3},{value:"Pour plus d&#39;informations",id:"pour-plus-dinformations",level:2}],d={toc:s},m="wrapper";function v(e){var{components:t}=e,r=i(e,["components"]);return(0,n.kt)(m,o(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){a(e,t,r[t])}))}return e}({},d,r),{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Si vous souhaitez automatiser la cr\xe9ation ou la maintenance de cartes standard, vous pouvez utiliser l'API de Centreon MAP."),(0,n.kt)("h2",{id:"permissions"},"Permissions"),(0,n.kt)("p",null,"Avec cette API, vous pouvez cr\xe9er / mettre \xe0 jour / supprimer des cartes standard. Pour pouvoir utiliser l'API, le compte que vous utilisez doit avoir l'un des privil\xe8ges suivants :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Un compte Centreon Admin."),(0,n.kt)("li",{parentName:"ul"},"Les droits de cr\xe9ation de carte et de modification sur les cartes que vous souhaitez mettre \xe0 jour / supprimer.")),(0,n.kt)("h2",{id:"comment-utiliser-lapi-de-centreon-map"},"Comment utiliser l'API de Centreon MAP"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Parce que l'API de Centreon MAP n'est pas \xe9vidente \xe0 utiliser, voici un sc\xe9nario pour s'authentifier, puis cr\xe9er une carte et y ajouter une \"shape\".")),(0,n.kt)("h3",{id:"sauthentifier"},"S'authentifier"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"POST : http://{{serverURL}}:8081/centreon-map/api/beta/auth/sign-in\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'Headers {\n    Content-Type = application/json\n    X-Client-Version = 23.10.0\n}\n\nBody {\n    "login" : "admin"\n    "password" : "denied"\n}\n')),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Dans le r\xe9sultat, r\xe9cup\xe9rez le {jwtToken}. Vous devrez l'utiliser pour tous vos appels \xe0 l'API. Les headers ressembleront \xe0 ceci :")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"Headers {\n    Content-Type = application/json\n    X-client-version = 23.10.0\n    Authorization = Bearer {jwtToken}\n}\n")),(0,n.kt)("h3",{id:"cr\xe9er-une-carte"},"Cr\xe9er une carte"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"POST http://{{serverURL}}:8081/centreon-map/api/beta/maps\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'Headers {\n    Content-Type = application/json\n    X-client-version =  23.10.0\n    Authorization = Bearer {jwtToken}\n}\n\nBody {\n      "name": "My new map created from API"\n   }\n')),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"R\xe9cup\xe9rez l'identifiant de la carte {mapId} et de la vue {viewId} renvoy\xe9s.")),(0,n.kt)("h3",{id:"ouvrir-la-carte"},"Ouvrir la carte"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"GET http://{{serverURL}}:8081/centreon-map/api/beta/maps/{mapId}/views/{viewId}\n")),(0,n.kt)("h3",{id:"cr\xe9er-et-attacher-un-\xe9l\xe9ment-shape-\xe0-la-carte-ouverte"},'Cr\xe9er et attacher un \xe9l\xe9ment "shape" \xe0 la carte ouverte'),(0,n.kt)("p",null,'Dans ce sc\xe9nario, l\'\xe9l\xe9ment "shape" est un rectangle.'),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"PUT http://{{serverURL}}:8081/centreon-map/api/beta/maps/{mapId}/views\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'Body: {\n "id": {viewId},\n "shapes": [\n     {\n        "type": "RECTANGLE",\n        "graphics": {\n             "label": "FR - Rectangle",\n             "x": 120,\n             "y": 120,\n             "width": 130,\n             "height": 53,\n             "color": "#0096FF",\n             "thickness": 1,\n             "borderColor": "#F0F0F0",\n             "line": "SOLID"\n         }\n      }\n   ]\n}\n')),(0,n.kt)("h2",{id:"pour-plus-dinformations"},"Pour plus d'informations"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Suivez ce ",(0,n.kt)("a",{parentName:"p",href:"https://docs-api.centreon.com/api/centreon-map/23.10/"},"lien")," pour acc\xe9der \xe0 la documentation de l'API Centreon et avoir un aper\xe7u des fonctionnalit\xe9s de l'API.")))}v.isMDXComponent=!0}}]);