"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[65999],{59805:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>u,default:()=>v,frontMatter:()=>p,metadata:()=>d,toc:()=>m});n(667294);var a=n(603905),r=n(451715),l=n(907626);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const p={id:"using-packages",title:"A partir des paquets"},u=void 0,d={unversionedId:"installation/installation-of-a-remote-server/using-packages",id:"version-21.10/installation/installation-of-a-remote-server/using-packages",title:"A partir des paquets",description:"Centreon fournit des RPM pour ses produits au travers de la solution",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-21.10/installation/installation-of-a-remote-server/using-packages.md",sourceDirName:"installation/installation-of-a-remote-server",slug:"/installation/installation-of-a-remote-server/using-packages",permalink:"/centreon-documentation/pr-preview/pr-2583/fr/docs/21.10/installation/installation-of-a-remote-server/using-packages",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/i18n/fr/docusaurus-plugin-content-docs/version-21.10/installation/installation-of-a-remote-server/using-packages.md",tags:[],version:"21.10",lastUpdatedAt:1693904912,formattedLastUpdatedAt:"5 sept. 2023",frontMatter:{id:"using-packages",title:"A partir des paquets"},sidebar:"version-21.10/docs",previous:{title:"A partir de l'ISO Centreon",permalink:"/centreon-documentation/pr-preview/pr-2583/fr/docs/21.10/installation/installation-of-a-remote-server/using-centreon-iso"},next:{title:"Ajouter un Poller \xe0 la configuration",permalink:"/centreon-documentation/pr-preview/pr-2583/fr/docs/21.10/monitoring/monitoring-servers/add-a-poller-to-configuration"}},c={},m=[{value:"\xc9tapes de pr\xe9-installation",id:"\xe9tapes-de-pr\xe9-installation",level:2},{value:"D\xe9sactiver SELinux",id:"d\xe9sactiver-selinux",level:3},{value:"Configurer ou d\xe9sactiver le pare-feu",id:"configurer-ou-d\xe9sactiver-le-pare-feu",level:3},{value:"Installer les d\xe9p\xf4ts",id:"installer-les-d\xe9p\xf4ts",level:3},{value:"D\xe9p\xf4t remi et CodeReady Builder",id:"d\xe9p\xf4t-remi-et-codeready-builder",level:4},{value:"D\xe9p\xf4t remi",id:"d\xe9p\xf4t-remi",level:4},{value:"D\xe9p\xf4t remi et CodeReady Builder",id:"d\xe9p\xf4t-remi-et-codeready-builder-1",level:4},{value:"D\xe9p\xf4t <em>Software collections</em> de Red Hat",id:"d\xe9p\xf4t-software-collections-de-red-hat",level:4},{value:"D\xe9p\xf4t remi",id:"d\xe9p\xf4t-remi-1",level:4},{value:"D\xe9p\xf4t Centreon",id:"d\xe9p\xf4t-centreon",level:4},{value:"Installation",id:"installation",level:2},{value:"Avec base de donn\xe9es locale",id:"avec-base-de-donn\xe9es-locale",level:3},{value:"Avec base de donn\xe9es d\xe9port\xe9e",id:"avec-base-de-donn\xe9es-d\xe9port\xe9e",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Nom du serveur",id:"nom-du-serveur",level:3},{value:"Fuseau horaire PHP",id:"fuseau-horaire-php",level:3},{value:"Lancement des services au d\xe9marrage",id:"lancement-des-services-au-d\xe9marrage",level:3},{value:"S\xe9curiser la base de donn\xe9es",id:"s\xe9curiser-la-base-de-donn\xe9es",level:3},{value:"Installation web",id:"installation-web",level:2},{value:"Enregistrer le Remote Server",id:"enregistrer-le-remote-server",level:2},{value:"Principaux messages d&#39;erreur",id:"principaux-messages-derreur",level:3},{value:"Ajouter le Remote Server \xe0 la configuration",id:"ajouter-le-remote-server-\xe0-la-configuration",level:2},{value:"S\xe9curisez votre plateforme",id:"s\xe9curisez-votre-plateforme",level:2}],k={toc:m},g="wrapper";function v(e){var{components:t}=e,n=i(e,["components"]);return(0,a.kt)(g,o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){s(e,t,n[t])}))}return e}({},k,n),{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Centreon fournit des RPM pour ses produits au travers de la solution\nCentreon Open Sources disponible gratuitement sur notre d\xe9p\xf4t."),(0,a.kt)("p",null,"Ces paquets ont \xe9t\xe9 test\xe9s avec succ\xe8s sur les environnements CentOS\nen version 7 et 8."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Cependant, suite au changement de strat\xe9gie effectu\xe9 par Red Hat, nous pensons\nqu'il est pr\xe9f\xe9rable de ne pas utiliser CentOS 8 en production. Ces paquets\npour CentOS 8 sont compatible avec RHEL et Oracle Linux en version 8.")),(0,a.kt)("p",null,"Apr\xe8s avoir install\xe9 votre serveur, r\xe9alisez la mise \xe0 jour de votre syst\xe8me\nd'exploitation via la commande :"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"RHEL / CentOS / Oracle Linux 8",label:"RHEL / CentOS / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf update\n"))),(0,a.kt)(l.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"yum update\n")))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Acceptez toutes les cl\xe9s GPG propos\xe9es et pensez a red\xe9marrer votre serveur\nsi une mise \xe0 jour du noyau est propos\xe9e.")),(0,a.kt)("h2",{id:"\xe9tapes-de-pr\xe9-installation"},"\xc9tapes de pr\xe9-installation"),(0,a.kt)("h3",{id:"d\xe9sactiver-selinux"},"D\xe9sactiver SELinux"),(0,a.kt)("p",null,"SELinux doit \xeatre d\xe9sactiv\xe9. Pour se faire, vous devez \xe9diter le fichier\n",(0,a.kt)("strong",{parentName:"p"},"/etc/selinux/config")," et remplacer ",(0,a.kt)("strong",{parentName:"p"},"enforcing")," par ",(0,a.kt)("strong",{parentName:"p"},"disabled"),", ou en\nex\xe9cutant la commande suivante :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"sed -i s/^SELINUX=.*$/SELINUX=disabled/ /etc/selinux/config\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Red\xe9marrez votre syst\xe8me d'exploitation pour prendre en compte le changement.")),(0,a.kt)("p",null,"Apr\xe8s le red\xe9marrage, une v\xe9rification rapide permet de confirmer le statut de\nSELinux :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"$ getenforce\nDisabled\n")),(0,a.kt)("h3",{id:"configurer-ou-d\xe9sactiver-le-pare-feu"},"Configurer ou d\xe9sactiver le pare-feu"),(0,a.kt)("p",null,"Param\xe9trer le pare-feu syst\xe8me ou d\xe9sactiver ce dernier. Pour d\xe9sactiver ce\ndernier ex\xe9cuter les commandes suivantes :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl stop firewalld\nsystemctl disable firewalld\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Vous pouvez trouver des instructions ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2583/fr/docs/21.10/administration/secure-platform#enable-firewalld"},"ici"),"\npour configurer le pare-feu.")),(0,a.kt)("h3",{id:"installer-les-d\xe9p\xf4ts"},"Installer les d\xe9p\xf4ts"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"RHEL 8",label:"RHEL 8",mdxType:"TabItem"},(0,a.kt)("h4",{id:"d\xe9p\xf4t-remi-et-codeready-builder"},"D\xe9p\xf4t remi et CodeReady Builder"),(0,a.kt)("p",null,"Afin d'installer les logiciels Centreon, les d\xe9p\xf4ts ",(0,a.kt)("strong",{parentName:"p"},"remi")," et ",(0,a.kt)("strong",{parentName:"p"},"CodeReady Builder")," doivent \xeatre install\xe9s."),(0,a.kt)("p",null,"Ex\xe9cutez les commandes suivantes :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y dnf-plugins-core\ndnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm\ndnf install -y https://rpms.remirepo.net/enterprise/remi-release-8.rpm\nsubscription-manager repos --enable codeready-builder-for-rhel-8-x86_64-rpms\n")),(0,a.kt)("p",null,"Activez PHP 8.0 en utilisant les commandes suivantes :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf module reset php\ndnf module install php:remi-8.0\n"))),(0,a.kt)(l.Z,{value:"CentOS 8",label:"CentOS 8",mdxType:"TabItem"},(0,a.kt)("h4",{id:"d\xe9p\xf4t-remi"},"D\xe9p\xf4t remi"),(0,a.kt)("p",null,"Afin d'installer les logiciels Centreon, le d\xe9p\xf4t ",(0,a.kt)("strong",{parentName:"p"},"remi")," doit \xeatre install\xe9."),(0,a.kt)("p",null,"Ex\xe9cutez les commandes suivantes :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y dnf-plugins-core\ndnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm\ndnf install -y https://rpms.remirepo.net/enterprise/remi-release-8.rpm\ndnf config-manager --set-enabled 'powertools'\n")),(0,a.kt)("p",null,"Activez PHP 8.0 en utilisant les commandes suivantes :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf module reset php\ndnf module install php:remi-8.0\n"))),(0,a.kt)(l.Z,{value:"Oracle Linux 8",label:"Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("h4",{id:"d\xe9p\xf4t-remi-et-codeready-builder-1"},"D\xe9p\xf4t remi et CodeReady Builder"),(0,a.kt)("p",null,"Afin d'installer les logiciels Centreon, les d\xe9p\xf4ts ",(0,a.kt)("strong",{parentName:"p"},"remi")," et ",(0,a.kt)("strong",{parentName:"p"},"CodeReady Builder")," doivent \xeatre install\xe9s."),(0,a.kt)("p",null,"Ex\xe9cutez les commandes suivantes :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y dnf-plugins-core\ndnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm\ndnf install -y https://rpms.remirepo.net/enterprise/remi-release-8.rpm\ndnf config-manager --set-enabled ol8_codeready_builder\n")),(0,a.kt)("p",null,"Activez PHP 8.0 en utilisant les commandes suivantes :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf module reset php\ndnf module install php:remi-8.0\n"))),(0,a.kt)(l.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,a.kt)("h4",{id:"d\xe9p\xf4t-software-collections-de-red-hat"},"D\xe9p\xf4t ",(0,a.kt)("em",{parentName:"h4"},"Software collections")," de Red Hat"),(0,a.kt)("p",null,"Afin d'installer les logiciels Centreon, le d\xe9p\xf4t ",(0,a.kt)("em",{parentName:"p"},"Software Collections")," de Red\nHat doit \xeatre activ\xe9. Celui-ci est n\xe9cessaire pour l'installation de apache 2.4."),(0,a.kt)("p",null,"Ex\xe9cutez la commande suivante :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"yum install -y centos-release-scl\n")),(0,a.kt)("h4",{id:"d\xe9p\xf4t-remi-1"},"D\xe9p\xf4t remi"),(0,a.kt)("p",null,"Afin d'installer les logiciels Centreon, le d\xe9p\xf4t ",(0,a.kt)("strong",{parentName:"p"},"remi")," doit \xeatre install\xe9."),(0,a.kt)("p",null,"Ex\xe9cutez les commandes suivantes :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"yum install -y yum-utils\nyum install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\nyum install -y https://rpms.remirepo.net/enterprise/remi-release-7.rpm\nyum-config-manager --enable remi-php80\n")))),(0,a.kt)("h4",{id:"d\xe9p\xf4t-centreon"},"D\xe9p\xf4t Centreon"),(0,a.kt)("p",null,"Afin d'installer les logiciels Centreon \xe0 partir des d\xe9p\xf4ts, vous devez au\npr\xe9alable installer le fichier li\xe9 au d\xe9p\xf4t."),(0,a.kt)("p",null,"Ex\xe9cutez la commande suivante :"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"RHEL / CentOS / Oracle Linux 8",label:"RHEL / CentOS / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y https://yum.centreon.com/standard/21.10/el8/stable/noarch/RPMS/centreon-release-21.10-5.el8.noarch.rpm\n"))),(0,a.kt)(l.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"yum install -y https://yum.centreon.com/standard/21.10/el7/stable/noarch/RPMS/centreon-release-21.10-5.el7.centos.noarch.rpm\n")))),(0,a.kt)("h2",{id:"installation"},"Installation"),(0,a.kt)("p",null,"Ce chapitre d\xe9crit l'installation d'un serveur Centreon Remote Server."),(0,a.kt)("p",null,"Il est possible d'installer ce serveur avec une base de donn\xe9es locale au\nserveur, ou d\xe9port\xe9e sur un serveur d\xe9di\xe9."),(0,a.kt)("h3",{id:"avec-base-de-donn\xe9es-locale"},"Avec base de donn\xe9es locale"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"RHEL / CentOS / Oracle Linux 8",label:"RHEL / CentOS / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y centreon centreon-database\nsystemctl daemon-reload\nsystemctl restart mariadb\n"))),(0,a.kt)(l.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"yum install -y centreon centreon-database\nsystemctl daemon-reload\nsystemctl restart mariadb\n")))),(0,a.kt)("p",null,"Vous pouvez maintenant passer \xe0 ",(0,a.kt)("a",{parentName:"p",href:"#configuration"},"l'\xe9tape suivante"),"."),(0,a.kt)("h3",{id:"avec-base-de-donn\xe9es-d\xe9port\xe9e"},"Avec base de donn\xe9es d\xe9port\xe9e"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Dans le cas d'une installation avec un serveur d\xe9di\xe9 \xe0 la base de donn\xe9es, ce\ndernier doit aussi avoir les d\xe9p\xf4ts pr\xe9requis.")),(0,a.kt)("p",null,"Ex\xe9cutez la commande suivante sur le serveur Centreon Central :"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"RHEL / CentOS / Oracle Linux 8",label:"RHEL / CentOS / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y centreon-base-config-centreon-engine centreon-widget\\*\n"))),(0,a.kt)(l.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"yum install -y centreon-base-config-centreon-engine centreon-widget\\*\n")))),(0,a.kt)("p",null,"Puis ex\xe9cutez les commandes suivantes sur le serveur d\xe9di\xe9 \xe0 la base de donn\xe9es :"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"RHEL / CentOS / Oracle Linux 8",label:"RHEL / CentOS / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y centreon-database\nsystemctl daemon-reload\nsystemctl restart mariadb\n"))),(0,a.kt)(l.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"yum install -y centreon-database\nsystemctl daemon-reload\nsystemctl restart mariadb\n")))),(0,a.kt)("p",null,"S\xe9curisez votre installation MariaDB en ex\xe9cutant la commande suivante :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"mysql_secure_installation\n")),(0,a.kt)("p",null,"Cr\xe9ez enfin un utilisateur avec privil\xe8ges ",(0,a.kt)("strong",{parentName:"p"},"root")," n\xe9cessaire \xe0 l'installation de\nCentreon :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-SQL"},"CREATE USER '<USER>'@'<IP>' IDENTIFIED BY '<PASSWORD>';\nGRANT ALL PRIVILEGES ON *.* TO '<USER>'@'<IP>' WITH GRANT OPTION;\nFLUSH PRIVILEGES;\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Remplacez ",(0,a.kt)("strong",{parentName:"p"},"<IP",">")," par l'adresse IP avec laquelle le serveur Centreon\nRemote Server se connectera au serveur de base de donn\xe9es."),(0,a.kt)("p",{parentName:"blockquote"},"Remplacez ",(0,a.kt)("strong",{parentName:"p"},"<USER",">")," et ",(0,a.kt)("strong",{parentName:"p"},"<PASSWORD",">")," par les identifiants de\nl'utilisateur.")),(0,a.kt)("p",null,"Une fois l'installation termin\xe9e vous pouvez supprimer cet utilisateur via la\ncommande :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-SQL"},"DROP USER '<USER>'@'<IP>';\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Le paquet ",(0,a.kt)("strong",{parentName:"p"},"centreon-database")," installe une configuration MariaDB optimis\xe9e\npour l'utilisation avec Centreon."),(0,a.kt)("p",{parentName:"blockquote"},"Si ce paquet n'est pas install\xe9, il faut \xe0 minima adapter la limitation\n",(0,a.kt)("strong",{parentName:"p"},"LimitNOFILE")," \xe0 ",(0,a.kt)("strong",{parentName:"p"},"32000")," via une configuration d\xe9di\xe9e, exemple:"),(0,a.kt)("pre",{parentName:"blockquote"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"$ cat /etc/systemd/system/mariadb.service.d/centreon.conf\n[Service]\nLimitNOFILE=32000\n")),(0,a.kt)("p",{parentName:"blockquote"},"De m\xeame pour la directive MariaDB ",(0,a.kt)("strong",{parentName:"p"},"open_files_limit"),", exemple:"),(0,a.kt)("pre",{parentName:"blockquote"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"$ cat /etc/my.cnf.d/centreon.cnf\n[server]\ninnodb_file_per_table=1\nopen_files_limit=32000\n")),(0,a.kt)("p",{parentName:"blockquote"},"Pensez \xe0 red\xe9marrer le service mariadb apr\xe8s chaque changement de\nconfiguration.")),(0,a.kt)("h2",{id:"configuration"},"Configuration"),(0,a.kt)("h3",{id:"nom-du-serveur"},"Nom du serveur"),(0,a.kt)("p",null,"Si vous le souhaitez, vous pouvez changer le nom du serveur \xe0 l'aide de la commande suivante:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"hostnamectl set-hostname new-server-name\n")),(0,a.kt)("p",null,"Remplacez ",(0,a.kt)("strong",{parentName:"p"},"new-server-name")," par le nom de votre choix. Exemple :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"hostnamectl set-hostname remote1\n")),(0,a.kt)("h3",{id:"fuseau-horaire-php"},"Fuseau horaire PHP"),(0,a.kt)("p",null,"La timezone par d\xe9faut de PHP doit \xeatre configur\xe9e. Ex\xe9cuter la commande suivante :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'echo "date.timezone = Europe/Paris" >> /etc/php.d/50-centreon.ini\n')),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Remplacez ",(0,a.kt)("strong",{parentName:"p"},"Europe/Paris")," par votre fuseau horaire. La liste des fuseaux\nhoraires est disponible ",(0,a.kt)("a",{parentName:"p",href:"http://php.net/manual/en/timezones.php"},"ici"),".")),(0,a.kt)("p",null,"Apr\xe8s avoir r\xe9alis\xe9 la modification, red\xe9marrez le service PHP-FPM :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart php-fpm\n")),(0,a.kt)("h3",{id:"lancement-des-services-au-d\xe9marrage"},"Lancement des services au d\xe9marrage"),(0,a.kt)("p",null,"Pour activer le lancement automatique des services au d\xe9marrage, ex\xe9cutez la\ncommande suivante sur le serveur Central :"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"RHEL / CentOS / Oracle Linux 8",label:"RHEL / CentOS / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl enable php-fpm httpd mariadb centreon cbd centengine gorgoned snmptrapd centreontrapd snmpd\n"))),(0,a.kt)(l.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl enable php-fpm httpd24-httpd mariadb centreon cbd centengine gorgoned snmptrapd centreontrapd snmpd\n")))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Si la base de donn\xe9es est sur un serveur d\xe9di\xe9, pensez \xe0 activer le\nlancement du service ",(0,a.kt)("strong",{parentName:"p"},"mariadb")," sur ce dernier.")),(0,a.kt)("h3",{id:"s\xe9curiser-la-base-de-donn\xe9es"},"S\xe9curiser la base de donn\xe9es"),(0,a.kt)("p",null,"Depuis MariaDB 10.5, il est obligatoire de s\xe9curiser l'acc\xe8s root \xe0 la base avant d'installer Centreon. Ex\xe9cutez la commande suivante :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"mysql_secure_installation\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},'R\xe9pondez oui \xe0 toute question sauf \xe0 "Disallow root login remotely?". '),(0,a.kt)("li",{parentName:"ul"},"Vous devez obligatoirement d\xe9finir un mot de passe pour l'utilisateur ",(0,a.kt)("strong",{parentName:"li"},"root")," de la base de donn\xe9es.\nCe mot de passe vous sera demand\xe9 lors de l'",(0,a.kt)("a",{parentName:"li",href:"/centreon-documentation/pr-preview/pr-2583/fr/docs/21.10/installation/web-and-post-installation"},"installation web"),".")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Pour plus d'informations, veuillez consulter la ",(0,a.kt)("a",{parentName:"p",href:"https://mariadb.com/kb/en/mysql_secure_installation/"},"documentation officielle MariaDB"),".")),(0,a.kt)("h2",{id:"installation-web"},"Installation web"),(0,a.kt)("p",null,"Avant de d\xe9marrer l'installation web, d\xe9marrez le serveur Apache avec la\ncommande suivante :"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"RHEL / CentOS / Oracle Linux 8",label:"RHEL / CentOS / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl start httpd\n"))),(0,a.kt)(l.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl start httpd24-httpd\n")))),(0,a.kt)("p",null,"Terminez l'installation en r\xe9alisant les\n",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2583/fr/docs/21.10/installation/web-and-post-installation#installation-web"},"\xe9tapes de l'installation web"),"."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Pendant l'installation web, il n'est pas n\xe9cessaire d'installer le module\nAutodiscovery.")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"A l'\xe9tape d'",(0,a.kt)("strong",{parentName:"p"},"Initialisation de la supervision"),", seules les actions 6 \xe0 8\ndoivent \xeatre faites.")),(0,a.kt)("h2",{id:"enregistrer-le-remote-server"},"Enregistrer le Remote Server"),(0,a.kt)("p",null,"Pour transformer le serveur en serveur distant et l'enregistrer sur le serveur Central, ex\xe9cutez la commande suivante sur le futur serveur distant :"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"RHEL / CentOS / Oracle Linux 8",label:"RHEL / CentOS / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"/usr/share/centreon/bin/registerServerTopology.sh -u <API_ACCOUNT> \\\n-t remote -h <IP_TARGET_NODE> -n <REMOTE_SERVER_NAME>\n")),(0,a.kt)("p",null,"Exemple:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"/usr/share/centreon/bin/registerServerTopology.sh -u admin -t remote -h 192.168.0.1 -n remote-1\n"))),(0,a.kt)(l.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"/usr/share/centreon/bin/registerServerTopology.sh -u <API_ACCOUNT> \\\n-t remote -h <IP_TARGET_NODE> -n <REMOTE_SERVER_NAME>\n")),(0,a.kt)("p",null,"Exemple:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"/usr/share/centreon/bin/registerServerTopology.sh -u admin -t remote -h 192.168.0.1 -n remote-1\n")))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Remplacez ",(0,a.kt)("strong",{parentName:"p"},"<IP_TARGET_NODE>")," par l'adresse IP du serveur Central auquel vous voulez rattacher le serveur distant (adresse IP vue par le serveur distant).")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Le compte ",(0,a.kt)("strong",{parentName:"p"},"<API_ACCOUNT>")," doit avoir acc\xe8s \xe0 l'API de configuration. Vous pouvez utiliser le compte ",(0,a.kt)("strong",{parentName:"p"},"admin"),".")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Vous pouvez changer le port et la m\xe9thode HTTP, le format de l'option ",(0,a.kt)("strong",{parentName:"p"},"-h")," est le suivant :\n",(0,a.kt)("inlineCode",{parentName:"p"},"HTTPS://<IP_TARGET_NODE>:PORT"))),(0,a.kt)("p",null,"Suivre ensuite les instructions"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Saisir le mot de passe :"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"192.168.0.1: please enter your password\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"S\xe9lectionner l'adresse IP si plusieurs interfaces r\xe9seau existent:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"Which IP do you want to use as CURRENT NODE IP ?\n1) 192.168.0.2\n2) 192.168.0.3\n1\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Valider les informations:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"Summary of the informations that will be send:\n\nApi Connection:\nusername: admin\npassword: ******\ntarget server: 192.168.0.1\n\nPending Registration Server:\nname: remote-1\ntype: remote\naddress: 192.168.0.2\n\nDo you want to register this server with those informations ? (y/n)y\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Ajouter les informations n\xe9cessaires pour permettre de futures communications entre votre Remote Server et son Central"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"<CURRENT_NODE_ADDRESS> : Please enter your username:\nadmin\n<CURRENT_NODE_ADDRESS> : Please enter your password:\n\n<CURRENT_NODE_ADDRESS> : Protocol [http]:\n<CURRENT_NODE_ADDRESS> : Port [80]:\n<CURRENT_NODE_ADDRESS> : centreon root folder [centreon]:\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"D\xe9finir les acc\xe8s au proxy du serveur Centreon du Central :"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"Are you using a proxy ? (y/n)\ny\nenter your proxy Host:\nmyproxy.example.com\nenter your proxy Port [3128]:\nAre you using a username/password ? (y/n)\ny\nenter your username:\nmy_proxy_username\nenter your password:\n\n")))),(0,a.kt)("p",null,"Vous recevrez la validation du serveur Centreon Central :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"2020-10-16T17:19:37+02:00 [INFO]: The CURRENT NODE 'remote: 'remote-1@192.168.0.2' has been converted and registered successfully.\n")),(0,a.kt)("p",null,"Enfin, il est n\xe9cessaire d'ajouter des droits \xe0 l'utilisateur de base de donn\xe9es ",(0,a.kt)("strong",{parentName:"p"},"centreon")," pour qu'il puisse\nutiliser la commande ",(0,a.kt)("strong",{parentName:"p"},"LOAD DATA INFILE")," :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"GRANT FILE on *.* to 'centreon'@'localhost';\n")),(0,a.kt)("h3",{id:"principaux-messages-derreur"},"Principaux messages d'erreur"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"2020-10-20T10:23:15+02:00 [ERROR]: Invalid credentials\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Vos informations d'identification sont incorrectes pour le compte ",(0,a.kt)("strong",{parentName:"p"},"<API_ACCOUNT>"),".")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"2020-10-20T10:24:59+02:00 [ERROR]: Access Denied.\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"L'utilisateur ",(0,a.kt)("strong",{parentName:"p"},"<API_ACCOUNT>")," n'a pas acc\xe8s \xe0 l'API de configuration.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"Failed connect to 192.168.0.1:444; Connection refused\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Impossible d'acc\xe9der \xe0 l'API. Contr\xf4ler les valeurs ",(0,a.kt)("strong",{parentName:"p"},"<IP_TARGET_NODE>"),", m\xe9thode et port.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"2020-10-20T10:39:30+02:00 [ERROR]: Can\u2019t connect to the API using: https://192.168.0.1:443/centreon/api/latest/login\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"L'URL d'acc\xe8s n'est pas compl\xe8te ou invalide. Utilisez l'option ",(0,a.kt)("strong",{parentName:"p"},"-root")," pour d\xe9finir le chemin de l'URL de l'API.\nPar exemple : ",(0,a.kt)("strong",{parentName:"p"},"--root monitoring"),".")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"2020-10-20T10:42:23+02:00 [ERROR]: No route found for \u201cPOST /centreon/api/latest/platform/topology\u201d\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"La version Centreon du serveur distant est invalide. Elle doit \xeatre sup\xe9rieure ou \xe9gale \xe0 21.10.")),(0,a.kt)("h2",{id:"ajouter-le-remote-server-\xe0-la-configuration"},"Ajouter le Remote Server \xe0 la configuration"),(0,a.kt)("p",null,"Rendez-vous au chapitre\n",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2583/fr/docs/21.10/monitoring/monitoring-servers/add-a-remote-server-to-configuration"},"Ajouter un Remote Server \xe0 la configuration"),"."),(0,a.kt)("h2",{id:"s\xe9curisez-votre-plateforme"},"S\xe9curisez votre plateforme"),(0,a.kt)("p",null,"N'oubliez pas de s\xe9curiser votre plateforme Centreon en suivant nos\n",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2583/fr/docs/21.10/administration/secure-platform"},"recommandations")))}v.isMDXComponent=!0}}]);