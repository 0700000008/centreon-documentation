"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[85368],{603905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>k});var a=n(667294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=s(n),d=r,k=m["".concat(p,".").concat(d)]||m[d]||c[d]||o;return n?a.createElement(k,i(i({ref:t},u),{},{components:n})):a.createElement(k,i({ref:t},u))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[m]="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},402803:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>p,default:()=>k,frontMatter:()=>l,metadata:()=>s,toc:()=>m});n(667294);var a=n(603905);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const l={id:"advanced-configuration",title:"Configuration avanc\xe9e"},p=void 0,s={unversionedId:"monitoring/monitoring-servers/advanced-configuration",id:"version-21.10/monitoring/monitoring-servers/advanced-configuration",title:"Configuration avanc\xe9e",description:"Centreon Broker et pare-feu",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-21.10/monitoring/monitoring-servers/advanced-configuration.md",sourceDirName:"monitoring/monitoring-servers",slug:"/monitoring/monitoring-servers/advanced-configuration",permalink:"/centreon-documentation/pr-preview/pr-2581/fr/docs/21.10/monitoring/monitoring-servers/advanced-configuration",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/i18n/fr/docusaurus-plugin-content-docs/version-21.10/monitoring/monitoring-servers/advanced-configuration.md",tags:[],version:"21.10",lastUpdatedAt:1693555452,formattedLastUpdatedAt:"1 sept. 2023",frontMatter:{id:"advanced-configuration",title:"Configuration avanc\xe9e"},sidebar:"version-21.10/docs",previous:{title:"Attachez le collecteur \xe0 un nouveau serveur",permalink:"/centreon-documentation/pr-preview/pr-2581/fr/docs/21.10/monitoring/monitoring-servers/move-poller"},next:{title:"Installation offline",permalink:"/centreon-documentation/pr-preview/pr-2581/fr/docs/21.10/installation/offline"}},u={},m=[{value:"Centreon Broker et pare-feu",id:"centreon-broker-et-pare-feu",level:2},{value:"Authentification avec Centreon Broker",id:"authentification-avec-centreon-broker",level:2},{value:"Centreontrapd Configuration",id:"centreontrapd-configuration",level:2},{value:"Collecteur",id:"collecteur",level:3},{value:"Remote Server",id:"remote-server",level:3},{value:"Pour aller plus loin avec Centreon Broker",id:"pour-aller-plus-loin-avec-centreon-broker",level:2},{value:"General Overview",id:"general-overview",level:3},{value:"Main Configuration Page",id:"main-configuration-page",level:3},{value:"Broker General Configuration Page",id:"broker-general-configuration-page",level:3},{value:"Broker Input Configuration Page",id:"broker-input-configuration-page",level:3},{value:"Broker Output Configuration Page",id:"broker-output-configuration-page",level:3},{value:"TCP Outputs",id:"tcp-outputs",level:4},{value:"File Outputs",id:"file-outputs",level:4},{value:"RRD Outputs",id:"rrd-outputs",level:4},{value:"Storage Outputs",id:"storage-outputs",level:4},{value:"SQL Outputs",id:"sql-outputs",level:4},{value:"Lua Outputs",id:"lua-outputs",level:4},{value:"Dumper Reader/Writer",id:"dumper-readerwriter",level:4}],c={toc:m},d="wrapper";function k(e){var{components:t}=e,l=i(e,["components"]);return(0,a.kt)(d,o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){r(e,t,n[t])}))}return e}({},c,l),{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"centreon-broker-et-pare-feu"},"Centreon Broker et pare-feu"),(0,a.kt)("p",null,"Certaines fois, il n'est pas possible d'initialiser le flux Centreon Broker\ndepuis le collecteur (ou Remote Server) vers le serveur Centreon Central ou le\nRemote Server."),(0,a.kt)("p",null,"Centreon a d\xe9velopp\xe9 la possibilit\xe9 d'initialiser le flux depuis le serveur\nCentreon Central vers le collecteur ou du Remote Server vers le collecteur."),(0,a.kt)("p",null,"Rendez-vous dans le menu ",(0,a.kt)("inlineCode",{parentName:"p"},"Configuration > Pollers > Broker configuration")," et\ncliquez sur la configuration ",(0,a.kt)("strong",{parentName:"p"},"Centreon Broker SQL")," du serveur Centreon Central\nou du Remote Server."),(0,a.kt)("p",null,"Rendez-vous dans l'onglet ",(0,a.kt)("strong",{parentName:"p"},"Input")," et ajouter une nouvelle entr\xe9e de type\n",(0,a.kt)("strong",{parentName:"p"},"TCP - IPv4"),"."),(0,a.kt)("p",null,"Saisissez le nom de cette configuration, le port TCP pour le champ ",(0,a.kt)("strong",{parentName:"p"},"Connection\nport")," afin de se connecter au collecteur et l'adresse IP du collecteur pour le\nchamp ",(0,a.kt)("strong",{parentName:"p"},"Host to connect to"),", puis cliquez sur ",(0,a.kt)("strong",{parentName:"p"},"Save")," :"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image",src:n(517341).Z,width:"434",height:"133"})),(0,a.kt)("p",null,"Rendez-vous dans le menu ",(0,a.kt)("inlineCode",{parentName:"p"},"Configuration > Pollers > Broker configuration")," et\ncliquez sur la configuration ",(0,a.kt)("strong",{parentName:"p"},"Broker module")," de votre collecteur."),(0,a.kt)("p",null,"Rendez-vous dans l'onglet ",(0,a.kt)("strong",{parentName:"p"},"Output")," et modifiez l'entr\xe9e ",(0,a.kt)("strong",{parentName:"p"},"Output 1 -IPv4")," :"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Supprimer la valeur pour le champ ",(0,a.kt)("strong",{parentName:"li"},"Host to connect to")),(0,a.kt)("li",{parentName:"ol"},"Contr\xf4lez le port TCP ",(0,a.kt)("strong",{parentName:"li"},"Connection port")),(0,a.kt)("li",{parentName:"ol"},"Activer l'option ",(0,a.kt)("strong",{parentName:"li"},"One peer retention"))),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image",src:n(339924).Z,width:"433",height:"456"})),(0,a.kt)("p",null,"Cliquez sur ",(0,a.kt)("strong",{parentName:"p"},"Save"),", g\xe9n\xe9rer et exporter la configuration des serveurs\nimpact\xe9s."),(0,a.kt)("h2",{id:"authentification-avec-centreon-broker"},"Authentification avec Centreon Broker"),(0,a.kt)("p",null,"Si vous souhaitez authentifier les pollers envoyant des donn\xe9es dans votre\nsyst\xe8me de monitoring vous pouvez utiliser le m\xe9canisme d\u2019authentification\nint\xe9gr\xe9 \xe0 Centreon Broker. Celui-ci est bas\xe9 sur l\u2019utilisation de certificats\nX.509."),(0,a.kt)("p",null,"La premi\xe8re \xe9tape est de g\xe9n\xe9rer un certificat pour l\u2019autorit\xe9 de certification\n(Certificate Authority, CA) avec OpenSSL. ca.key sera la cl\xe9 priv\xe9e (\xe0 stocker\nde mani\xe8re s\xe9curis\xe9e), tandis que ca.crt sera la cl\xe9 publique servant \xe0\nauthentifier les connexions entrantes :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"openssl req -x509 -newkey rsa:2048 -nodes -keyout ca.key -out ca.crt -days 365\n")),(0,a.kt)("p",null,"Nous pouvons maintenant g\xe9n\xe9rer les certificats en utilisant la cl\xe9 de la CA :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"openssl req -new -newkey rsa:2048 -nodes -keyout central.key -out central.csr -days 365\nopenssl req -new -newkey rsa:2048 -nodes -keyout poller.key -out poller.csr -days 365\nopenssl x509 -req -in central.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out central.crt -days 365 -sha256\nopenssl x509 -req -in poller.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out poller.crt -days 365 -sha256\n")),(0,a.kt)("p",null,"Placez ",(0,a.kt)("em",{parentName:"p"},"central.key"),", ",(0,a.kt)("em",{parentName:"p"},"central.crt")," et ",(0,a.kt)("em",{parentName:"p"},"ca.crt")," sur le serveur Centreon central\n(dans ",(0,a.kt)("strong",{parentName:"p"},"/etc/centreon-broker")," par exemple) et ",(0,a.kt)("em",{parentName:"p"},"poller.key"),", ",(0,a.kt)("em",{parentName:"p"},"poller.crt")," et\n",(0,a.kt)("em",{parentName:"p"},"ca.crt")," sur votre poller."),(0,a.kt)("p",null,"Nous devons maintenant configurer Centreon Broker pour utiliser ces fichiers.\nAllez dans ",(0,a.kt)("inlineCode",{parentName:"p"},"Configuration > Pollers > Broker configuration"),". Pour\n",(0,a.kt)("em",{parentName:"p"},"central-broker-master"),", dans l'onglet ",(0,a.kt)("em",{parentName:"p"},"Input"),", vous devez remplir les\nparam\xe8tres suivants pour ",(0,a.kt)("em",{parentName:"p"},"central-broker-master-input"),"."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Enable TLS encryption = Yes"),(0,a.kt)("li",{parentName:"ul"},"Private key file = /etc/centreon-broker/central.key"),(0,a.kt)("li",{parentName:"ul"},"Public certificate = /etc/centreon-broker/central.crt"),(0,a.kt)("li",{parentName:"ul"},"Trusted CA's certificate = /etc/centreon-broker/ca.crt")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image",src:n(583430).Z,width:"603",height:"133"})),(0,a.kt)("p",null,"De mani\xe8re similaire pour le poller, vous devez modifier les param\xe8tres de la\nconnexion TCP dans l'onglet Output."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Enable TLS encryption = Yes"),(0,a.kt)("li",{parentName:"ul"},"Private key file = /etc/centreon-broker/poller.key"),(0,a.kt)("li",{parentName:"ul"},"Public certificate = /etc/centreon-broker/poller.crt"),(0,a.kt)("li",{parentName:"ul"},"Trusted CA's certificate = /etc/centreon-broker/ca.crt")),(0,a.kt)("p",null,"R\xe9g\xe9n\xe9rez la configuration des pollers affect\xe9s par ces changements\n(",(0,a.kt)("inlineCode",{parentName:"p"},"Configuration > Pollers > Pollers"),") et la mise en place de l'authentification est\ntermin\xe9e."),(0,a.kt)("h2",{id:"centreontrapd-configuration"},"Centreontrapd Configuration"),(0,a.kt)("h3",{id:"collecteur"},"Collecteur"),(0,a.kt)("p",null,"Il est n\xe9cessaire de modifier la configuration du processus Centreontrapd afin\nd'utiliser la base de donn\xe9es locale SQLite. R\xe9f\xe9rez-vous au chapitre\n",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2581/fr/docs/21.10/monitoring/passive-monitoring/enable-snmp-traps"},"Supervision Passive"),".."),(0,a.kt)("h3",{id:"remote-server"},"Remote Server"),(0,a.kt)("p",null,"La configuration du processus Centreontrapd est identique \xe0 celle d'un serveur\nCentreon Central."),(0,a.kt)("h2",{id:"pour-aller-plus-loin-avec-centreon-broker"},"Pour aller plus loin avec Centreon Broker"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Cette section est uniquement disponible en langue anglaise.")),(0,a.kt)("p",null,"This section aims to help user understand how Centreon Broker works and how it\nshould be configured. It references Centreon's best practices and describe the\nvarious options used by Centreon Broker."),(0,a.kt)("h3",{id:"general-overview"},"General Overview"),(0,a.kt)("p",null,"Centreon Broker is at is core a simple multiplexing engine. It takes events from\n",(0,a.kt)("em",{parentName:"p"},"Inputs")," and send them to various ",(0,a.kt)("em",{parentName:"p"},"Outputs"),". ",(0,a.kt)("em",{parentName:"p"},"Inputs")," are typically other\ninstances of Centreon Broker over TCP/IP, while ",(0,a.kt)("em",{parentName:"p"},"Outputs")," can be a SQL database,\nother brokers, a BI/BAM engine, Centreon Map, etc."),(0,a.kt)("p",null,"Each ",(0,a.kt)("em",{parentName:"p"},"Input")," or ",(0,a.kt)("em",{parentName:"p"},"Output")," has a ",(0,a.kt)("em",{parentName:"p"},"type")," that describe what it does and several\nparameters, some of them mandatory and other optional. Additionally, an ",(0,a.kt)("em",{parentName:"p"},"Output"),"\ncan have a ",(0,a.kt)("em",{parentName:"p"},"Failover")," that will start when the ",(0,a.kt)("em",{parentName:"p"},"Output")," is in an error state to\nallow retention of data."),(0,a.kt)("p",null,"An important distinction to make is the standalone Centreon Broker versus a\nCentreon Broker installed as Centreon Engine's module. Both have the exact same\ncapabilities and support the same ",(0,a.kt)("em",{parentName:"p"},"Inputs")," and ",(0,a.kt)("em",{parentName:"p"},"Outputs"),". The difference is that\nCentreon Broker configured as a module will be automatically started when\nCentreon Engine starts and automatically generates the events associated to this\nCentreon Engine. Often, those modules only have one ",(0,a.kt)("em",{parentName:"p"},"Output")," to an instance of\nCentreon Broker acting as a concentrator."),(0,a.kt)("h3",{id:"main-configuration-page"},"Main Configuration Page"),(0,a.kt)("p",null,"This section lists all the instances of Centreon Broker configured in your park,\neither in standalone or module mode. Each instance has a name, is associated\nwith a poller, has a number of ",(0,a.kt)("em",{parentName:"p"},"Inputs"),", ",(0,a.kt)("em",{parentName:"p"},"Outputs"),", and ",(0,a.kt)("em",{parentName:"p"},"Loggers"),", and can be\n'enabled' or 'disabled'."),(0,a.kt)("p",null,"A poller of type 'Central' will have three instances of Centreon Broker by\ndefault. One Centreon Broker installed as a module for Centreon Engine (here\ncalled ",(0,a.kt)("em",{parentName:"p"},"central-module-master"),"), one Centreon Broker acting as a stand-alone\nconcentrator (here called ",(0,a.kt)("em",{parentName:"p"},"central-broker-master"),") and one Centreon Broker\nspecialized in generating the RRD data used by the graphs (here called\n",(0,a.kt)("em",{parentName:"p"},"central-rrd-master"),"). A best practice is to always use a separate instance of\nCentreon Broker to generate RRD data. This way, an issue in the RRD stack will\nnot cause any issue in your main monitoring."),(0,a.kt)("p",null,"As expected, ",(0,a.kt)("em",{parentName:"p"},"central-module-master")," has only one ",(0,a.kt)("em",{parentName:"p"},"Output")," and zero ",(0,a.kt)("em",{parentName:"p"},"Input"),".\nConfigured as a module to Centreon Engine, it generates events on its own and\nforward them to the standalone instance of Centreon Broker."),(0,a.kt)("p",null,"A poller generally only have an instance of Centreon Broker, configured as a\nmodule for Centreon Engine."),(0,a.kt)("h3",{id:"broker-general-configuration-page"},"Broker General Configuration Page"),(0,a.kt)("p",null,"This section lists all the general options associated with an instance of\nCentreon Broker."),(0,a.kt)("p",null,"Main options:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Poller",(0,a.kt)("br",{parentName:"p"}),"\n","The poller where this instance lives.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Name",(0,a.kt)("br",{parentName:"p"}),"\n","The name of this instance.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Config file name",(0,a.kt)("br",{parentName:"p"}),"\n","The name of the configuration file used by this instance.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Retention path",(0,a.kt)("br",{parentName:"p"}),"\n","When an ",(0,a.kt)("em",{parentName:"p"},"Output")," is in an error state, a ",(0,a.kt)("em",{parentName:"p"},"Failover")," is launched. ",(0,a.kt)("em",{parentName:"p"},"Failovers"),"\nsave data in files called retention files. Those in turn are saved in the\ndirectory specified here. Best practice is '/var/lib/centreon-broker/'")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Status",(0,a.kt)("br",{parentName:"p"}),"\n","This is used to enable or disable this instance."))),(0,a.kt)("p",null,"Log options:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Log directory\nPath where the log file will be created.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Log filename\nName of the log file. Default is ",(0,a.kt)("inlineCode",{parentName:"p"},"<name of this broker configuration entry>"),".log")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Maximum files size (in bytes)\nA value different from zero will cause the creation of a new numbered log\nfile as soon as the maximum size is reached. Recommended value is ",(0,a.kt)("inlineCode",{parentName:"p"},"0"),".")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"core\nLog level for ",(0,a.kt)("inlineCode",{parentName:"p"},"core")," log messages, the main logs of centreon-broker.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"config\nLog level for ",(0,a.kt)("inlineCode",{parentName:"p"},"config")," log messages.\nUseful to troubleshoot configuration handling issues.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"sql\nLog level for ",(0,a.kt)("inlineCode",{parentName:"p"},"sql")," log messages.\nUseful to troubleshoot database queries issues.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"processing\nLog level for ",(0,a.kt)("inlineCode",{parentName:"p"},"processing")," log messages. You shouldn't change it unless\nyou know what you are looking for.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"perfdata\nLog level for ",(0,a.kt)("inlineCode",{parentName:"p"},"perfdata")," log messages.\nUseful to troubleshoot performance data processing issues.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"bbdo\nLog level for ",(0,a.kt)("inlineCode",{parentName:"p"},"bbdo")," log messages.\nUseful to troubleshoot ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2581/fr/docs/21.10/developer/developer-broker-bbdo"},"broker binary data objects")," issues.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"tcp\nLog level for ",(0,a.kt)("inlineCode",{parentName:"p"},"tcp")," log messages.\nUseful to troubleshoot network related issues.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"tls\nLog level for ",(0,a.kt)("inlineCode",{parentName:"p"},"tls")," log messages.\nUseful to troubleshoot TLS encryption issues.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"lua\nLog level for ",(0,a.kt)("inlineCode",{parentName:"p"},"lua")," log messages.\nUseful to troubleshoot ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2581/fr/docs/21.10/developer/developer-broker-stream-connector"},"Lua Stream Connectors")," issues.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"bam\nLog level for ",(0,a.kt)("inlineCode",{parentName:"p"},"bam")," log messages.\nUseful to troubleshoot ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/pr-2581/fr/docs/21.10/service-mapping/introduction"},"Business Activity Monitoring")," issues.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Write timestamp (applies to the ",(0,a.kt)("a",{parentName:"p",href:"#broker-logger-configuration-page-deprecated"},"deprecated loggger options"),")\nIf activated, each log entry is preceded by the timestamp of the time it was\nwritten down. This is useful to know when an error occured. Best practice is\n'Yes'.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Write thread id",(0,a.kt)("br",{parentName:"p"}),"\n","If activated, each log entry is preceded by the ID of the thread being\nexecuted at this instant. This is only useful for advanced debugging\npurpose. Best practice is 'No'."))),(0,a.kt)("p",null,"Advanced Options:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Statistics",(0,a.kt)("br",{parentName:"p"}),"\n","Centreon Broker has a mechanism of on-demand status reporting that can be\nenabled here. This is used by Centreon Web to check the status of this\ninstance at any time, to know which ",(0,a.kt)("em",{parentName:"p"},"Inputs")," and ",(0,a.kt)("em",{parentName:"p"},"Outputs")," are in an error\nstate, and to generate various statistics on event processing. Best practice\nis 'Yes'.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Correlation",(0,a.kt)("br",{parentName:"p"}),"\n","Centreon Broker has a mechanism of top-level correlation. This should only\nbe actived if top-level correlation has been properly configured in Centreon\nWeb. In all other cases, default to 'No'.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Event queue max size",(0,a.kt)("br",{parentName:"p"}),"\n","The max size of the in-memory queue, in events. If the number of events in\nmemory exceeds this number, Centreon Broker will start to use 'temporary\nfiles' to prevent Broker from using too much memory at the cost of\nadditional disk I/O. The exact number can be tweaked to use more or less\nmemory. A good default is '50000'."))),(0,a.kt)("p",null,"If 'Statistics' is enabled, on-demand status can be queried manually through a\nfile placed in /var/lib/centreon-broker/",(0,a.kt)("em",{parentName:"p"},"name"),".stats."),(0,a.kt)("h3",{id:"broker-input-configuration-page"},"Broker Input Configuration Page"),(0,a.kt)("p",null,"This section lists all the ",(0,a.kt)("em",{parentName:"p"},"Inputs")," activated for this instance of Centreon\nBroker. Centreon Broker can have as many ",(0,a.kt)("em",{parentName:"p"},"Inputs")," as needed."),(0,a.kt)("p",null,"Inputs read events from a TCP connection. All ",(0,a.kt)("em",{parentName:"p"},"Inputs")," have the following\nparameters:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Name",(0,a.kt)("br",{parentName:"p"}),"\n","The name of the input. Must be unique.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Serialization protocol",(0,a.kt)("br",{parentName:"p"}),"\n","The protocol that was used to serialize the data. Can be either 'BBDO' or\n'NDO'. NDO is an old textual protocol that suffers from very poor\nperformance, poor density of data, and poor security. BBDO is a next-gen\nbinary protocol that is performant and secure. NDO is deprecated. It should\nnever be used in new installation. Best practice is 'BBDO'.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Compression",(0,a.kt)("br",{parentName:"p"}),"\n","If compression was used to serialize the data. Can be 'auto', 'yes', or\n'no'. If left on 'auto' Centreon Broker will detect if compression was used\nwhile doing a TCP handshake (or assume no compression was used for files).\nDefault to 'auto' for TCP, 'no' for files.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Filter category",(0,a.kt)("br",{parentName:"p"}),"\n","The categories of events accepted by this ",(0,a.kt)("em",{parentName:"p"},"Input"),". If empty, no restriction\non events accepted. If filled, only events of the given type will be\nprocessed. ",(0,a.kt)("em",{parentName:"p"},"Input")," that accept data from Centreon Engines' Broker module\nshould be set to accept only 'Neb' events.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Connection Port",(0,a.kt)("br",{parentName:"p"}),"\n","Which port will be used for the connection. Mandatory.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Host to connect to",(0,a.kt)("br",{parentName:"p"}),"\n","This important parameter will decide if this input will listen or attempt to\ninitiate a connection. Left empty, this input will listen on its given port.\nIf filled, this input will attempt to initiate a connection to the given\nhost/port.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Enable TLS encryption",(0,a.kt)("br",{parentName:"p"}),"\n","Enable the encryption of the flux. For the encryption to work, the private\nkey file, the public certificate and the trusted CA's certificate need to be\nset on both end. Default to 'auto', i.e 'no' unless TCP negociation has been\nactivated and the remote endpoint has activated encryption.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Private Key File",(0,a.kt)("br",{parentName:"p"}),"\n","The private key file used for the encryption.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Public certificate",(0,a.kt)("br",{parentName:"p"}),"\n","The public certificate used for the encryption.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Trusted CA's certificate",(0,a.kt)("br",{parentName:"p"}),"\n","The trused CA certificate used for the encryption.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Enable negociation",(0,a.kt)("br",{parentName:"p"}),"\n","Enable negociation. If 'yes', this ",(0,a.kt)("em",{parentName:"p"},"Intput")," will try to negociate encryption\nand compression with the remote endpoint.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"One peer retention mode",(0,a.kt)("br",{parentName:"p"}),"\n","By default, a listening input will accept any number of incoming\nconnections. In 'one peer retention' mode only one connection is accepted at\nthe same time, on a first-come first-serve basis. Default to 'no'."))),(0,a.kt)("p",null,"To reiterate, TCP ",(0,a.kt)("em",{parentName:"p"},"Input")," can either listen on a given port or can attempt to\ninitiate a connection if a host is given. This allow flexible network topology."),(0,a.kt)("h3",{id:"broker-output-configuration-page"},"Broker Output Configuration Page"),(0,a.kt)("p",null,"This section lists all the ",(0,a.kt)("em",{parentName:"p"},"Outputs")," activated for this instance of Centreon\nBroker. Centreon Broker can have as many ",(0,a.kt)("em",{parentName:"p"},"Outputs")," as needed."),(0,a.kt)("p",null,"For each ",(0,a.kt)("em",{parentName:"p"},"Outputs"),", the parameters are:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Type",(0,a.kt)("br",{parentName:"p"}),"\n","There is a several types for ",(0,a.kt)("em",{parentName:"p"},"Outputs")," managed by Centreon Broker."),(0,a.kt)("ol",{parentName:"li"},(0,a.kt)("li",{parentName:"ol"},"'TCP - IPV4' and 'TCP - IPV6': This ",(0,a.kt)("em",{parentName:"li"},"Output")," forwards data to another\nserver, either another Centreon Broker or Centreon Map."),(0,a.kt)("li",{parentName:"ol"},"File: This ",(0,a.kt)("em",{parentName:"li"},"Output")," write data into a file."),(0,a.kt)("li",{parentName:"ol"},"RRD: This ",(0,a.kt)("em",{parentName:"li"},"Output")," will generate RRD data from performance data."),(0,a.kt)("li",{parentName:"ol"},"Storage: This ",(0,a.kt)("em",{parentName:"li"},"Output")," will write metrics into the database and generate\nperformance data."),(0,a.kt)("li",{parentName:"ol"},"SQL: This ",(0,a.kt)("em",{parentName:"li"},"Output")," will write real time status into Centreon's database."),(0,a.kt)("li",{parentName:"ol"},"Dumper Reader: This ",(0,a.kt)("em",{parentName:"li"},"Output")," will read from a database when Broker is\nasked to synchronize databases."),(0,a.kt)("li",{parentName:"ol"},"Dumper Writer: This ",(0,a.kt)("em",{parentName:"li"},"Output")," will write into a database when Broker is\nasked to synchronize databases."),(0,a.kt)("li",{parentName:"ol"},"BAM Monitoring: This ",(0,a.kt)("em",{parentName:"li"},"Output")," will generate BAM data from raw events and\nupdate real time BAM status."),(0,a.kt)("li",{parentName:"ol"},"BAM Reporting: This ",(0,a.kt)("em",{parentName:"li"},"Output")," will write long term BAM logs that can then\nbe used by BI."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Failover",(0,a.kt)("br",{parentName:"p"}),"\n","A ",(0,a.kt)("em",{parentName:"p"},"Failover")," is an ",(0,a.kt)("em",{parentName:"p"},"Output")," that will be started when this ",(0,a.kt)("em",{parentName:"p"},"Output")," is in\nerror state. Example are TCP connections gone haywire, MySQL server suddenly\ndisconnecting, etc. By default, each ",(0,a.kt)("em",{parentName:"p"},"Output")," has an automatic ",(0,a.kt)("em",{parentName:"p"},"Failover"),"\nthat will automatically store data in retention files and replay it when the\nprimary ",(0,a.kt)("em",{parentName:"p"},"Output")," recover from its error state. This is what you want in 99%\nof the case. Otherwhise, you can specify here another ",(0,a.kt)("em",{parentName:"p"},"Output")," that will act\nas a ",(0,a.kt)("em",{parentName:"p"},"Failover")," if this is what you need.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Retry interval",(0,a.kt)("br",{parentName:"p"}),"\n","When this ",(0,a.kt)("em",{parentName:"p"},"Output")," is in error state, this parameter control how much time\nthe ",(0,a.kt)("em",{parentName:"p"},"Output")," will wait before retrying. Default is one attempt every 30\nseconds.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Buffering timeout",(0,a.kt)("br",{parentName:"p"}),"\n","When this ",(0,a.kt)("em",{parentName:"p"},"Output")," is in error state, Centreon Broker will wait this much\ntime before launching the ",(0,a.kt)("em",{parentName:"p"},"Failover"),". This is mainly useful if you want to\nmake Centreon Broker wait for another software to initialize before\nactivating its ",(0,a.kt)("em",{parentName:"p"},"Failover"),". In all other cases, this should not be used.\nDefault is 0 seconds.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Filter category",(0,a.kt)("br",{parentName:"p"}),"\n","The categories of events accepted by this ",(0,a.kt)("em",{parentName:"p"},"Output"),". If empty, no restriction\non events accepted. If filled, only events of the given type will be\nprocessed. The exact best practices are ",(0,a.kt)("em",{parentName:"p"},"Output")," specific."),(0,a.kt)("ol",{parentName:"li"},(0,a.kt)("li",{parentName:"ol"},"'BAM Reporting' should only accept 'Bam' events."),(0,a.kt)("li",{parentName:"ol"},"'Dump Writer' should only accept 'Dumper' events."),(0,a.kt)("li",{parentName:"ol"},"'RRD' should only accept 'Storage' events.")),(0,a.kt)("p",{parentName:"li"},"In all other cases, no restriction should be configured."))),(0,a.kt)("p",null,"Events generated by an ",(0,a.kt)("em",{parentName:"p"},"Output")," are reinjected into Centreon Broker's event\nqueue."),(0,a.kt)("p",null,"Some ",(0,a.kt)("em",{parentName:"p"},"Outputs")," only works when consuming data generated by another ",(0,a.kt)("em",{parentName:"p"},"Output"),". A\n'RRD' ",(0,a.kt)("em",{parentName:"p"},"Output")," consumes data from a Storage ",(0,a.kt)("em",{parentName:"p"},"Output"),", a 'Dumper Writer' consumes\ndata from a 'Dumper Reader', and a 'BAM Reporting' ",(0,a.kt)("em",{parentName:"p"},"Output")," consumes data from a\n'BAM Monitoring' ",(0,a.kt)("em",{parentName:"p"},"Output"),"."),(0,a.kt)("p",null,"Centreon Web needs at least an active ",(0,a.kt)("em",{parentName:"p"},"Output")," 'SQL' to activate its real time\nmonitoring capabilities. The ",(0,a.kt)("em",{parentName:"p"},"Outputs")," 'Storage' and 'RRD' are needed to\nactivate Centreon Web metric plotting. The ",(0,a.kt)("em",{parentName:"p"},"Output")," 'BAM Monitoring' is needed\nfor real time BAM data and the ",(0,a.kt)("em",{parentName:"p"},"Output")," 'BAM Reporting' for BI report."),(0,a.kt)("p",null,"Due to the fully distributed nature of Centreon Broker, producer and consumer\n",(0,a.kt)("em",{parentName:"p"},"Outputs")," can be located on logically or physically different instances, as long\nas they are connected to each other."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Important"),": Centreon Web 2.x features two databases, the configuration\ndatabase and the real time database. Those are respectively called 'centreon'\nand 'centreon-storage'. Different ",(0,a.kt)("em",{parentName:"p"},"Outputs")," expect different database in their\nconfiguration."),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Output Type"),(0,a.kt)("th",{parentName:"tr",align:null},"Expected database"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"SQL"),(0,a.kt)("td",{parentName:"tr",align:null},"centreon-storage")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Storage"),(0,a.kt)("td",{parentName:"tr",align:null},"centreon-storage")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Dumper Reader"),(0,a.kt)("td",{parentName:"tr",align:null},"centreon")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Dumper Writer"),(0,a.kt)("td",{parentName:"tr",align:null},"centreon")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"BAM Monitoring"),(0,a.kt)("td",{parentName:"tr",align:null},"centreon")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"BAM Reporting"),(0,a.kt)("td",{parentName:"tr",align:null},"centreon-storage")))),(0,a.kt)("h4",{id:"tcp-outputs"},"TCP Outputs"),(0,a.kt)("p",null,"TCP ",(0,a.kt)("em",{parentName:"p"},"Outputs")," forward events to a a remote endpoint. As with TCP ",(0,a.kt)("em",{parentName:"p"},"Inputs"),", TCP\n",(0,a.kt)("em",{parentName:"p"},"Output")," can either listen on a given port or can attempt to initiate a\nconnection if a host parameter is given. This allow flexible network topology."),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"Outputs")," of type 'TCP' have the following parameters:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Serialization protocol",(0,a.kt)("br",{parentName:"p"}),"\n","The protocol that will be used to serialize the data. Can be either 'BBDO'\nor 'NDO'. NDO is an old textual protocol that suffers from very poor\nperformance, poor density of data, and poor security. BBDO is a next-gen\nbinary protocol that is performant and secure. NDO is deprecated. It should\nnever be used in new installation. Best practice is 'BBDO'.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Enable negociation",(0,a.kt)("br",{parentName:"p"}),"\n","Enable negociation. If 'yes', this ",(0,a.kt)("em",{parentName:"p"},"Output")," will try to negociate encryption\nand compression with the remote endpoint.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Connection Port",(0,a.kt)("br",{parentName:"p"}),"\n","Which port will be used for the connection. Mandatory.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Host to connect to",(0,a.kt)("br",{parentName:"p"}),"\n","This important parameter will decide if this ",(0,a.kt)("em",{parentName:"p"},"Output")," will listen or attempt\nto initiate a connection. Left empty, this ",(0,a.kt)("em",{parentName:"p"},"Output")," will listen on its given\nport. If filled, this ",(0,a.kt)("em",{parentName:"p"},"Output")," will attempt to initiate a connection to the\ngiven host/port.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Enable TLS encryption",(0,a.kt)("br",{parentName:"p"}),"\n","Enable the encryption of the flux. For the encryption to work, the private\nkey file, the public certificate and the trusted CA's certificate need to be\nset on both end. Default to 'auto', i.e 'no' unless TCP negociation has been\nactivated and the remote endpoint has activated encryption.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Private Key File",(0,a.kt)("br",{parentName:"p"}),"\n","The private key file used for the encryption.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Public certificate",(0,a.kt)("br",{parentName:"p"}),"\n","The public certificate used for the encryption.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Trusted CA's certificate",(0,a.kt)("br",{parentName:"p"}),"\n","The trused CA certificate used for the encryption.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"One peer retention mode",(0,a.kt)("br",{parentName:"p"}),"\n","By default, a listening ",(0,a.kt)("em",{parentName:"p"},"Output")," will accept any number of incoming\nconnections. In 'one peer retention' mode only one connection is accepted at\nthe same time, on a first-come first-serve basis. Default to 'no'.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Compression",(0,a.kt)("br",{parentName:"p"}),"\n","If compression should be used to serialize the data. Can be 'auto', 'yes',\nor 'no'. If left on 'auto' Centreon Broker will detect if compression is\nsupported by the endpoint during a TCP negociation. Default to 'auto' for\nTCP.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Compression Level",(0,a.kt)("br",{parentName:"p"}),"\n","The level of compression that should be used, from 1 to 9. Default (or if\nnot filled) is 6. The higher the compression level is, the higher the\ncompression will be at the cost of processing power.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Compression Buffer",(0,a.kt)("br",{parentName:"p"}),"\n","The size of the compression buffer that should be used. Best practice is '0'\nor nothing."))),(0,a.kt)("h4",{id:"file-outputs"},"File Outputs"),(0,a.kt)("p",null,"File ",(0,a.kt)("em",{parentName:"p"},"Outputs")," send events into a file on the disk. Additionally, they have the\ncapability of replaying the data of this file if used as a ",(0,a.kt)("em",{parentName:"p"},"Failover")," ",(0,a.kt)("em",{parentName:"p"},"Output"),".\nMost 'File' ",(0,a.kt)("em",{parentName:"p"},"Outputs")," will be used as ",(0,a.kt)("em",{parentName:"p"},"Failovers"),"."),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"Outputs")," of type 'File' have the following parameters:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Serialization protocol",(0,a.kt)("br",{parentName:"p"}),"\n","The protocol that will be used to serialize the data. Can be either 'BBDO'\nor 'NDO'. NDO is an old textual protocol that suffers from very poor\nperformance, poor density of data, and poor security. BBDO is a next-gen\nbinary protocol that is performant and secure. NDO is deprecated. It should\nnever be used in new installation. Best practice is 'BBDO'.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"File path",(0,a.kt)("br",{parentName:"p"}),"\n","The path of the file being written to.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Compression",(0,a.kt)("br",{parentName:"p"}),"\n","If compression should be used to serialize the data. Can be 'auto', 'yes',\nor 'no'. 'auto' is equal to 'no' for files.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Compression Level",(0,a.kt)("br",{parentName:"p"}),"\n","The level of compression that should be used, from 1 to 9. Default (or if\nnot filled) is 6. The higher the compression level is, the higher the\ncompression will be at the cost of processing power.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Compression Buffer",(0,a.kt)("br",{parentName:"p"}),"\n","The size of the compression buffer that should be used. Best practice is '0'\nor nothing."))),(0,a.kt)("h4",{id:"rrd-outputs"},"RRD Outputs"),(0,a.kt)("p",null,"RRD ",(0,a.kt)("em",{parentName:"p"},"Outputs")," generate RRD data (used by Centreon Web to generate graphs) from\nmetrics data generated by a 'Storage' ",(0,a.kt)("em",{parentName:"p"},"Output"),". Best practice is to isolate this\n",(0,a.kt)("em",{parentName:"p"},"Output")," on its own instance of Centreon Broker to ensure that an issue in the\nRRD stack will not have any effect on the main instance of Centreon Broker."),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"Outputs")," of type 'RRD' have the following parameters:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"RRD file directory for metrics",(0,a.kt)("br",{parentName:"p"}),"\n","The directory where the RRD files of the metrics will be written. A good\ndefault is /var/lib/centreon/metrics/.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"RRD file directory for statuses",(0,a.kt)("br",{parentName:"p"}),"\n","The directory where the RRD files of the statuses will be written. A good\ndefault is /var/lib/centreon/statuse/")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"TCP port",(0,a.kt)("br",{parentName:"p"}),"\n","The port used by RRDCached, if RRDCached has been configured on this server.\nIf not, nothing.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Unix socket",(0,a.kt)("br",{parentName:"p"}),"\n","The unix socket used by RRDCached, if RRDCached has been configured on this\nserver. If not, nothing.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Write metrics",(0,a.kt)("br",{parentName:"p"}),"\n","Should RRD metric files be written? Default 'yes'.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Write status",(0,a.kt)("br",{parentName:"p"}),"\n","Should RRD status files be written? Default 'yes'."))),(0,a.kt)("h4",{id:"storage-outputs"},"Storage Outputs"),(0,a.kt)("p",null,"Perfdata storage ",(0,a.kt)("em",{parentName:"p"},"Outputs")," save metric data into a database and generate RRD\ndata used by the 'RRD' ",(0,a.kt)("em",{parentName:"p"},"Output"),". This ",(0,a.kt)("em",{parentName:"p"},"Output")," usually generates a lot of\nqueries and is very performance intensive. If Centreon Broker is slow, tweaking\nthe Maximum Queries Per Transaction parameter of this ",(0,a.kt)("em",{parentName:"p"},"Output")," is the first\noptimization to attempt."),(0,a.kt)("p",null,"This ",(0,a.kt)("em",{parentName:"p"},"Output")," can be tasked to rebuild 'RRD' data from a database of stored\nmetric data. This is usually a costly, slow process, during which it is still\nable to process new metric data, though not as quickly."),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"Outputs")," of type 'Storage' have the following parameters:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"DB Type",(0,a.kt)("br",{parentName:"p"}),"\n","The type of the database being accessed. MariaDB is a state-of-the-art\ndatabase that has been extensively tested with Centreon. We advice the use\nof MariaDB.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"DB Port",(0,a.kt)("br",{parentName:"p"}),"\n","The port of the database being accessed.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"DB User",(0,a.kt)("br",{parentName:"p"}),"\n","The user used by this ",(0,a.kt)("em",{parentName:"p"},"Output")," to connect to this database.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"DB Name",(0,a.kt)("br",{parentName:"p"}),"\n","The name of this database. In Centreon term, this is the database containing\nthe real-time monitoring data, generally called 'centreon-storage'.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"DB Password",(0,a.kt)("br",{parentName:"p"}),"\n","The password used by this ",(0,a.kt)("em",{parentName:"p"},"Output")," to connect to this database.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Maximum queries per transaction",(0,a.kt)("br",{parentName:"p"}),"\n","This parameter is used to batch several queries in large transaction. This\nallow fine performance tuning but can generate latency if not enough queries\nare generated to fill those batches. The Default is 20000 queries per\ntransaction. If you have very low load and unexpectedly high latency, try\nlowering this number. If you have a very high load and high latency, try\nraising this number.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Transaction commit timeout",(0,a.kt)("br",{parentName:"p"}),"\n","How many seconds are allowed to pass before a forced commit is made. Default\nis infinite. If you have very low load and unexpectedly high latency, try 5\nseconds.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Replication enabled",(0,a.kt)("br",{parentName:"p"}),"\n","Should Centreon Broker check that the replication status of this database is\ncomplete before trying to insert data in it? Only useful if replication is\nenabled for this database.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Rebuild check interval in seconds",(0,a.kt)("br",{parentName:"p"}),"\n","The amount of seconds between each rebuild check. Default 300 seconds.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Store in performance data in data","_","bin",(0,a.kt)("br",{parentName:"p"}),"\n","Should this ",(0,a.kt)("em",{parentName:"p"},"Output")," saves the metric data in the database? Default 'yes'.\nIf 'no', this ",(0,a.kt)("em",{parentName:"p"},"Output")," will generate RRD data without saving them into the\ndatabase, making a rebuild impossible.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Insert in index data",(0,a.kt)("br",{parentName:"p"}),"\n","Insert new ids into the database. Default 'no'. This should never be\nmodified unless prompted by Centreon Support or explicitely written down\ninto a documentation."))),(0,a.kt)("h4",{id:"sql-outputs"},"SQL Outputs"),(0,a.kt)("p",null,"SQL ",(0,a.kt)("em",{parentName:"p"},"Outputs")," save real time status data into the real time database used by\nCentreon Web. This is the most important ",(0,a.kt)("em",{parentName:"p"},"Output")," for the operation of Centreon\nWeb."),(0,a.kt)("p",null,"Moreover, this ",(0,a.kt)("em",{parentName:"p"},"Output")," has a garbage collector that will clean old data from\nthe database occasionally. This is an optional process, as old data is marked\n'disabled', and can actually be useful to keep around for debugging purpose."),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"Outputs")," of type 'SQL' have the following parameters:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"DB Type",(0,a.kt)("br",{parentName:"p"}),"\n","The type of the database being accessed. MariaDB is a state-of-the-art\ndatabase that has been extensively tested with Centreon. We advice the use\nof MariaDB.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"DB Port",(0,a.kt)("br",{parentName:"p"}),"\n","The port of the database being accessed.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"DB User",(0,a.kt)("br",{parentName:"p"}),"\n","The user used by this ",(0,a.kt)("em",{parentName:"p"},"Output")," to connect to this database.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"DB Name",(0,a.kt)("br",{parentName:"p"}),"\n","The name of this database. In Centreon term, this is the database containing\nthe real-time monitoring data, generally called 'centreon-storage'.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"DB Password",(0,a.kt)("br",{parentName:"p"}),"\n","The password used by this ",(0,a.kt)("em",{parentName:"p"},"Output")," to connect to this database.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Maximum queries per transaction",(0,a.kt)("br",{parentName:"p"}),"\n","This parameter is used to batch several queries in large transaction. This\nallow fine performance tuning but can generate latency if not enough queries\nare generated to fill those batches. The Default is 20000 queries per\ntransaction. If you have very low load and unexpectedly high latency, try\nlowering this number. If you have a very high load and high latency, try\nraising this number.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Transaction commit timeout",(0,a.kt)("br",{parentName:"p"}),"\n","How many seconds are allowed to pass before a forced commit is made. Default\nis infinite. If you have very low load and unexpectedly high latency, try 5\nseconds.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Replication enabled",(0,a.kt)("br",{parentName:"p"}),"\n","Should Centreon Broker check that the replication status of this database is\ncomplete before trying to insert data in it? Only useful if replication is\nenabled for this database.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Cleanup check interval",(0,a.kt)("br",{parentName:"p"}),"\n","How many seconds between each run of the garbage collector cleaning old data\nin the database? Default is never.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Instance timeout",(0,a.kt)("br",{parentName:"p"}),"\n","How many seconds before an instance is marked as 'unresponding' and all of\nits hosts and services marked as 'unknown'. Default is 300 seconds."))),(0,a.kt)("h4",{id:"lua-outputs"},"Lua Outputs"),(0,a.kt)("p",null,"Lua ",(0,a.kt)("em",{parentName:"p"},"Outputs")," send metrics information into a script by a key-value system. The\nLua script should be on your server."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Path",(0,a.kt)("br",{parentName:"p"}),"\n","The path of the Lua script in your server.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Filter category",(0,a.kt)("br",{parentName:"p"}),"\n","The categories of events accepted by this Output. If empty, no restriction\non events accepted. If filled, only events of the given type will be\nprocessed. Outputs that accept data from Centreon Engine's Broker module\nshould be set to accept only \u2018Neb\u2019 events."))),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"Lua parameter")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Type",(0,a.kt)("br",{parentName:"p"}),"\n","Type of the metric value.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Name/Key",(0,a.kt)("br",{parentName:"p"}),"\n","Name of the metric value.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Value",(0,a.kt)("br",{parentName:"p"}),"\n","Value of the metric."))),(0,a.kt)("h4",{id:"dumper-readerwriter"},"Dumper Reader/Writer"),(0,a.kt)("p",null,"A Dumper Reader/Writer pair is used to synchronize part of a database between\ntwo instances of Centreon Broker. In the future there will be an extensive\nsynchronization mechanism, but today it is mainly used to synchronize BA for the\nBAM Poller Display mechanism."),(0,a.kt)("p",null,"The BAM Poller Display configuration documentation explains how to properly\nconfigure those ",(0,a.kt)("em",{parentName:"p"},"Outputs"),"."),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"Outputs")," of type 'Dumper Reader' and 'Dumper Writer' have the following\nparameters:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"DB Type",(0,a.kt)("br",{parentName:"p"}),"\n","The type of the database being accessed. MariaDB is a state-of-the-art\ndatabase that has been extensively tested with Centreon. We advice the use\nof MariaDB.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"DB Port",(0,a.kt)("br",{parentName:"p"}),"\n","The port of the database being accessed.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"DB User",(0,a.kt)("br",{parentName:"p"}),"\n","The user used by this ",(0,a.kt)("em",{parentName:"p"},"Output")," to connect to this database.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"DB Name",(0,a.kt)("br",{parentName:"p"}),"\n","The name of this database. In Centreon term, this is the database containing\nthe configuration data, generally called 'centreon'.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"DB Password",(0,a.kt)("br",{parentName:"p"}),"\n","The password used by this ",(0,a.kt)("em",{parentName:"p"},"Output")," to connect to this database."))))}k.isMDXComponent=!0},583430:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/broker-certificates-42dbbe021f4a6ce7c3c0cfb6d44d3a96.png"},517341:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/on-peer-configuration-1-a18dcbf35102015786f210538f2637cc.png"},339924:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/on-peer-configuration-2-6599d8bc3657a74985152de4040d94c2.png"}}]);