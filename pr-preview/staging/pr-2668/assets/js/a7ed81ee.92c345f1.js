"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[63045],{603905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>g});var n=r(667294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var i=n.createContext({}),s=function(e){var t=n.useContext(i),r=t;return e&&(r="function"==typeof e?e(t):p(p({},t),e)),r},u=function(e){var t=s(e.components);return n.createElement(i.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=s(r),m=a,g=c["".concat(i,".").concat(m)]||c[m]||d[m]||o;return r?n.createElement(g,p(p({ref:t},u),{},{components:r})):n.createElement(g,p({ref:t},u))}));function g(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,p=new Array(o);p[0]=m;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l[c]="string"==typeof e?e:a,p[1]=l;for(var s=2;s<o;s++)p[s]=r[s];return n.createElement.apply(null,p)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},484809:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>g,frontMatter:()=>l,metadata:()=>s,toc:()=>c});r(667294);var n=r(603905);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function p(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const l={id:"upgrade-from-20-04",title:"Upgrade from Centreon 20.04"},i=void 0,s={unversionedId:"upgrade/upgrade-from-20-04",id:"version-21.10/upgrade/upgrade-from-20-04",title:"Upgrade from Centreon 20.04",description:"This chapter describes how to upgrade your Centreon platform from version 20.04",source:"@site/versioned_docs/version-21.10/upgrade/upgrade-from-20-04.md",sourceDirName:"upgrade",slug:"/upgrade/upgrade-from-20-04",permalink:"/centreon-documentation/pr-preview/staging/pr-2668/docs/21.10/upgrade/upgrade-from-20-04",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/versioned_docs/version-21.10/upgrade/upgrade-from-20-04.md",tags:[],version:"21.10",lastUpdatedAt:1697628514,formattedLastUpdatedAt:"Oct 18, 2023",frontMatter:{id:"upgrade-from-20-04",title:"Upgrade from Centreon 20.04"},sidebar:"version-21.10/docs",previous:{title:"Upgrade from Centreon 20.10",permalink:"/centreon-documentation/pr-preview/staging/pr-2668/docs/21.10/upgrade/upgrade-from-20-10"},next:{title:"Upgrade from Centreon 19.10",permalink:"/centreon-documentation/pr-preview/staging/pr-2668/docs/21.10/upgrade/upgrade-from-19-10"}},u={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Perform a backup",id:"perform-a-backup",level:3},{value:"Update the RPM signing key",id:"update-the-rpm-signing-key",level:3},{value:"Upgrade the Centreon Central server",id:"upgrade-the-centreon-central-server",level:2},{value:"Update the Centreon repository",id:"update-the-centreon-repository",level:3},{value:"Upgrade PHP",id:"upgrade-php",level:3},{value:"Upgrade the Centreon solution",id:"upgrade-the-centreon-solution",level:3},{value:"Update your customized Apache configuration",id:"update-your-customized-apache-configuration",level:3},{value:"Finalizing the upgrade",id:"finalizing-the-upgrade",level:3},{value:"Post-upgrade actions",id:"post-upgrade-actions",level:3},{value:"Upgrade the MariaDB server",id:"upgrade-the-mariadb-server",level:3},{value:"Update the Centreon repository",id:"update-the-centreon-repository-1",level:4},{value:"Upgrading MariaDB",id:"upgrading-mariadb",level:4},{value:"Enable MariaDB on startup",id:"enable-mariadb-on-startup",level:4},{value:"Upgrade the Remote Servers",id:"upgrade-the-remote-servers",level:2},{value:"Upgrade the Pollers",id:"upgrade-the-pollers",level:2},{value:"Update the Centreon repository",id:"update-the-centreon-repository-2",level:3},{value:"Upgrade the Centreon solution",id:"upgrade-the-centreon-solution-1",level:3},{value:"Secure your platform",id:"secure-your-platform",level:2}],d={toc:c},m="wrapper";function g(e){var{components:t}=e,l=p(e,["components"]);return(0,n.kt)(m,o(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){a(e,t,r[t])}))}return e}({},d,l),{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"This chapter describes how to upgrade your Centreon platform from version 20.04\nto version 21.10."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"If you want to migrate your Centreon server to CentOS / Oracle Linux / RHEL 8\nyou need to follow the ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2668/docs/21.10/migrate/migrate-from-20-x"},"migration procedure"))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"To perform this procedure, your MariaDB version must be >= 10.3.22.\nIf not, please follow before the ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2668/docs/21.10/upgrade/upgrade-from-19-10#upgrade-mariadb-server"},"MariaDB update chapter"))),(0,n.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,n.kt)("h3",{id:"perform-a-backup"},"Perform a backup"),(0,n.kt)("p",null,"Be sure that you have fully backed up your environment for the following\nservers:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Central server"),(0,n.kt)("li",{parentName:"ul"},"Database server")),(0,n.kt)("h3",{id:"update-the-rpm-signing-key"},"Update the RPM signing key"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"For security reasons, the keys used to sign Centreon RPMs are rotated regularly. The last change occurred on October 14, 2021. When upgrading from an older version, you need to go through the ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2668/docs/21.10/security/key-rotation#existing-installation"},"key rotation procedure"),", to remove the old key and install the new one.")),(0,n.kt)("h2",{id:"upgrade-the-centreon-central-server"},"Upgrade the Centreon Central server"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Since 21.04, Centreon uses ",(0,n.kt)("strong",{parentName:"p"},"MariaDB 10.5"),"."),(0,n.kt)("p",{parentName:"blockquote"},"This upgrade process will only upgrade Centreon components first."),(0,n.kt)("p",{parentName:"blockquote"},"MariaDB will be upgraded afterwards.")),(0,n.kt)("h3",{id:"update-the-centreon-repository"},"Update the Centreon repository"),(0,n.kt)("p",null,"Run the following commands:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"yum install -y https://packages.centreon.com/rpm-standard/21.10/el7/stable/noarch/RPMS/centreon-release-21.10-5.el7.centos.noarch.rpm\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"If you have an offline license, install the corresponding repository for the plugin packs.\nIf you are using a Business edition, install the correct Business repository too.\nYou can find the repositories on the ",(0,n.kt)("a",{parentName:"p",href:"https://support.centreon.com/hc/en-us/categories/10341239833105-Repositories"},"support portal"),".")),(0,n.kt)("h3",{id:"upgrade-php"},"Upgrade PHP"),(0,n.kt)("p",null,"Centreon 21.10 uses PHP in version 8.0."),(0,n.kt)("p",null,"First, you need to install the ",(0,n.kt)("strong",{parentName:"p"},"remi")," repository:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"yum install -y yum-utils\nyum install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\nyum install -y https://rpms.remirepo.net/enterprise/remi-release-7.rpm\n")),(0,n.kt)("p",null,"Then, you need to enable the php 8.0 repository"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"yum-config-manager --enable remi-php80\n")),(0,n.kt)("h3",{id:"upgrade-the-centreon-solution"},"Upgrade the Centreon solution"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Please, make sure all users are logged out from the Centreon web interface\nbefore starting the upgrade procedure.")),(0,n.kt)("p",null,"If you have installed Business extensions, update the Business repository to version 21.10.\nVisit the ",(0,n.kt)("a",{parentName:"p",href:"https://support.centreon.com/hc/en-us/categories/10341239833105-Repositories"},"support portal")," to get its address."),(0,n.kt)("p",null,"Stop the Centreon Broker process:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl stop cbd\n")),(0,n.kt)("p",null,"Delete existing retention files:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"rm /var/lib/centreon-broker/* -f\n")),(0,n.kt)("p",null,"Clean yum cache:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"yum clean all --enablerepo=*\n")),(0,n.kt)("p",null,"Then upgrade all the components with the following command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"yum update centreon\\*\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Accept new GPG keys from the repositories as needed.")),(0,n.kt)("p",null,"The PHP timezone should be set. Run the command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},'echo "date.timezone = Europe/Paris" >> /etc/php.d/50-centreon.ini\n')),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Replace ",(0,n.kt)("strong",{parentName:"p"},"Europe/Paris")," by your time zone. You can find the list of\nsupported time zones ",(0,n.kt)("a",{parentName:"p",href:"http://php.net/manual/en/timezones.php"},"here"),".")),(0,n.kt)("p",null,"Execute the following commands:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl stop rh-php72-php-fpm\nsystemctl disable rh-php72-php-fpm\nsystemctl enable php-fpm\nsystemctl start php-fpm\n")),(0,n.kt)("h3",{id:"update-your-customized-apache-configuration"},"Update your customized Apache configuration"),(0,n.kt)("p",null,"This section only applies if you customized your Apache configuration. When upgrading your platform, the Apache configuration file is not upgraded automatically: the new configuration file brought by the rpm does not replace tha old file. You must copy the changes manually to your customized configuration file."),(0,n.kt)("p",null,"Run a diff between the old and the new Apache configuration files:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"diff -u /opt/rh/httpd24/root/etc/httpd/conf.d/10-centreon.conf /opt/rh/httpd24/root/etc/httpd/conf.d/10-centreon.conf.rpmnew\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"10-centreon.conf")," (post upgrade): this file contains the custom configuration. It does not contain anthing new brought by version 21.10, e.g. the ",(0,n.kt)("strong",{parentName:"li"},"authentication")," string in the ",(0,n.kt)("strong",{parentName:"li"},"LocationMatch")," directive"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"10-centreon.conf.rpmnew")," (post upgrade): this file is provided by the rpm; it contains the ",(0,n.kt)("strong",{parentName:"li"},"authentication")," string, but does not contain any custom configuration.")),(0,n.kt)("p",null,"For each difference between the files, assess whether you should copy it from ",(0,n.kt)("strong",{parentName:"p"},"10-centreon.conf.rpmnew")," to ",(0,n.kt)("strong",{parentName:"p"},"10-centreon.conf"),"."),(0,n.kt)("p",null,"In particular, make sure your customized Apache configuration contains the following directive (with ",(0,n.kt)("strong",{parentName:"p"},"authentication"),")."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"<LocationMatch ^/centreon/(authentication|api/(latest|beta|v[0-9]+|v[0-9]+\\.[0-9]+))/.*$>\n    ProxyPassMatch fcgi://127.0.0.1:9042/usr/share/centreon/api/index.php/$1\n</LocationMatch>\n")),(0,n.kt)("h3",{id:"finalizing-the-upgrade"},"Finalizing the upgrade"),(0,n.kt)("p",null,"Before starting the web upgrade process, reload the Apache server with the\nfollowing command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl reload httpd24-httpd\n")),(0,n.kt)("p",null,"Then log on to the Centreon web interface to continue the upgrade process:"),(0,n.kt)("p",null,"Click on ",(0,n.kt)("strong",{parentName:"p"},"Next"),":"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"image",src:r(621241).Z,width:"650",height:"300"})),(0,n.kt)("p",null,"Click on ",(0,n.kt)("strong",{parentName:"p"},"Next"),":"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"image",src:r(847252).Z,width:"650",height:"300"})),(0,n.kt)("p",null,"The release notes describe the main changes. Click on ",(0,n.kt)("strong",{parentName:"p"},"Next"),":"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"image",src:r(321632).Z,width:"650",height:"300"})),(0,n.kt)("p",null,"This process performs the various upgrades. Click on ",(0,n.kt)("strong",{parentName:"p"},"Next"),":"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"image",src:r(953990).Z,width:"650",height:"300"})),(0,n.kt)("p",null,"Your Centreon server is now up to date. Click on ",(0,n.kt)("strong",{parentName:"p"},"Finish")," to access the login\npage:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"image",src:r(751137).Z,width:"650",height:"300"})),(0,n.kt)("p",null,"If the Centreon BAM module is installed, refer to the\n",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2668/docs/21.10/service-mapping/upgrade"},"upgrade procedure"),"."),(0,n.kt)("h3",{id:"post-upgrade-actions"},"Post-upgrade actions"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Upgrade extensions. From ",(0,n.kt)("strong",{parentName:"p"},"Administration > Extensions > Manager"),", upgrade all extensions, starting\nwith the following:"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"License Manager,")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Plugin Packs Manager,")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Auto Discovery."),(0,n.kt)("p",{parentName:"li"},"Then you can upgrade all other commercial extensions.")))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2668/docs/21.10/monitoring/monitoring-servers/deploying-a-configuration"},"Deploy the configuration"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Restart Centreon processes:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre"},"systemctl restart cbd centengine centreontrapd gorgoned\n")))),(0,n.kt)("h3",{id:"upgrade-the-mariadb-server"},"Upgrade the MariaDB server"),(0,n.kt)("p",null,"The MariaDB components can now be upgraded."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Refer to the official MariaDB documentation to know more about this process:"),(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("a",{parentName:"p",href:"https://mariadb.com/kb/en/upgrading-between-major-mariadb-versions/"},"https://mariadb.com/kb/en/upgrading-between-major-mariadb-versions/"))),(0,n.kt)("h4",{id:"update-the-centreon-repository-1"},"Update the Centreon repository"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"This step is required ONLY when your environment features an architecture with\na dedicated remote DBMS. If your environment features Centreon Central and\nMariaDB together on the same server, you SHOULD simply skip this step.")),(0,n.kt)("p",null,"Run the following command on the dedicated DBMS server:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"yum install -y https://packages.centreon.com/rpm-standard/21.10/el7/stable/noarch/RPMS/centreon-release-21.10-5.el7.centos.noarch.rpm\n")),(0,n.kt)("h4",{id:"upgrading-mariadb"},"Upgrading MariaDB"),(0,n.kt)("p",null,"You have to uninstall then reinstall MariaDB to upgrade between major versions (i.e. to switch from version 10.3 to version 10.5)."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Stop the mariadb service:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl stop mariadb\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Uninstall the current version:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"rpm --erase --nodeps --verbose MariaDB-server MariaDB-client MariaDB-shared MariaDB-compat MariaDB-common\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Install version 10.5:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"yum install MariaDB-server-10.5\\* MariaDB-client-10.5\\* MariaDB-shared-10.5\\* MariaDB-compat-10.5\\* MariaDB-common-10.5\\*\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Start the mariadb service:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl start mariadb\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Launch the MariaDB upgrade process:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"mysql_upgrade\n")),(0,n.kt)("p",{parentName:"li"},"If your database is password-protected, enter:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"mysql_upgrade -u <database_admin_user> -p\n")),(0,n.kt)("p",{parentName:"li"},"Example: if your database_admin_user is ",(0,n.kt)("inlineCode",{parentName:"p"},"root"),", enter:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre"},"mysql_upgrade -u root -p\n")),(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("p",{parentName:"blockquote"},"Refer to the ",(0,n.kt)("a",{parentName:"p",href:"https://mariadb.com/kb/en/mysql_upgrade/"},"official documentation"),"\nfor more information or if errors occur during this last step.")))),(0,n.kt)("h4",{id:"enable-mariadb-on-startup"},"Enable MariaDB on startup"),(0,n.kt)("p",null,"Execute the following command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl enable mariadb\n")),(0,n.kt)("h2",{id:"upgrade-the-remote-servers"},"Upgrade the Remote Servers"),(0,n.kt)("p",null,"This procedure is the same than to upgrade a Centreon Central server."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"At the end of the update, configuration should be deployed from the Central server.")),(0,n.kt)("h2",{id:"upgrade-the-pollers"},"Upgrade the Pollers"),(0,n.kt)("h3",{id:"update-the-centreon-repository-2"},"Update the Centreon repository"),(0,n.kt)("p",null,"Run the following command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"yum install -y https://packages.centreon.com/rpm-standard/21.10/el7/stable/noarch/RPMS/centreon-release-21.10-5.el7.centos.noarch.rpm \n")),(0,n.kt)("h3",{id:"upgrade-the-centreon-solution-1"},"Upgrade the Centreon solution"),(0,n.kt)("p",null,"Clean yum cache:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"yum clean all --enablerepo=*\n")),(0,n.kt)("p",null,"Upgrade all the components with the following command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"yum update centreon\\*\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Accept new GPG keys from the repositories as needed.")),(0,n.kt)("p",null,"Start and enable ",(0,n.kt)("strong",{parentName:"p"},"gorgoned"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl start gorgoned\nsystemctl enable gorgoned\n")),(0,n.kt)("p",null,"Restart ",(0,n.kt)("strong",{parentName:"p"},"centengine"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart centengine\n")),(0,n.kt)("h2",{id:"secure-your-platform"},"Secure your platform"),(0,n.kt)("p",null,"Don't forget to secure your Centreon platform following our\n",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2668/docs/21.10/administration/secure-platform"},"recommendations")))}g.isMDXComponent=!0},621241:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/web_update_1-229784d5ed7986045c49b65b99ce38cd.png"},847252:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/web_update_2-f12be23b17ba9e83853cbdbaaea65402.png"},321632:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/web_update_3-d505e49a3b4f60dfd887ff45ddbf006b.png"},953990:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/web_update_4-97901eb976096c68fb2bd9d37c4de9bc.png"},751137:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/web_update_5-01f8c54614c006d7c1bf9e03799c1b81.png"}}]);